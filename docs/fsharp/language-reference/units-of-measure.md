---
title: 測定単位 (F#)
description: どの浮動小数点をについて説明しますと F# の符号付き整数値には、測定単位を長さ、ボリューム、および大容量を示すために使用される通常を関連付けることができます。
ms.date: 05/16/2016
ms.openlocfilehash: ad2193e25f3c0cee6e73cd529ab43d1e4b6b549b
ms.sourcegitcommit: db8b83057d052c1f9f249d128b08d4423af0f7c2
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 11/02/2018
ms.locfileid: "45972518"
---
# <a name="units-of-measure"></a>測定単位

F# の浮動小数点値と符号付き整数値を大量のボリュームの長さを示すために通常使用される、測定単位が関連付けられてことができます。 算術リレーションシップでは正しいユニットがあるを防ぐことができますを確認するコンパイラを有効にした数量の単位を使用してプログラミング エラーです。

## <a name="syntax"></a>構文

```fsharp
[<Measure>] type unit-name [ = measure ]
```

## <a name="remarks"></a>Remarks

前の構文を定義*単位名*メジャーの単位として。 オプションの一部を使用して、以前に定義された単位で新しいメジャーを定義します。 たとえば、次の行は、メジャーを定義します。 `cm` (センチメートル)。

```fsharp
[<Measure>] type cm
```

次の行のメジャーを定義する`ml`(milliliter) として立方センチメートル (`cm^3`)。

```fsharp
[<Measure>] type ml = cm^3
```

前の構文で*メジャー*ユニットを含む式です。 単位を使用する数式で整数乗がサポートされている (正と負の値)、ユニットの間にスペースが 2 つの単位の製品を示す`*`ユニットの積を示しますと`/`ユニットの商を示します。 逆数の単位、負の整数の電源を使用することができますか、または`/`分子と分母の単位の数式を分離することを示します。 分母に複数のユニットは、かっこで囲む必要があります。 ユニットは、後のスペースで区切られた、`/`分母では、次の任意の単位の一部として解釈されます、`*`分子の一部として解釈されます。

または、分子など、他の単位と無次元の数量を示すためだけにいずれかの単位式では、1 を使用できます。 速度の単位として書き込まれますたとえば、`1/s`ここで、`s`秒数を示します。 かっこは、単位の数式では使用されません。 単位の数式で数値変換の定数を指定しません。ただし、ユニットとは別に変換定数を定義でき、計算の単位がチェックされたで使用できます。

同じことを意味する単位の数式は、さまざまな同等の方法で記述できます。 そのため、コンパイラは単位の数式を逆数をグループ単位には、1 つの分子と分母では、負の累乗を変換し、分子と分母の単位をアルファベット順に並べ替えますが、一貫性のある形式に変換します。

単位の数式など`kg m s^-2`と`m /s s * kg`に変換されます両方`kg m/s^2`します。

浮動小数点式では、測定単位を使用します。 タイプ セーフのもう 1 つのレベルを追加するメジャーの関連付けられている単位と浮動小数点数を使用して、弱く型指定された浮動小数点数を使用するときに、数式で発生する単体の不一致エラーを回避できます。 浮動を記述する場合は、単位を使用するポイント式、式の単位が一致する必要があります。

次の例に示すように、山かっこで単位の数式を使用したリテラルに注釈を付けることができます。

```fsharp
1.0<cm>
55.0<miles/hour>
```

山かっ; と数の間にスペースを配置しないでください。ただし、リテラルのサフィックスをなどに含めることができます`f`次の例のようにします。

```fsharp
// The f indicates single-precision floating point.
55.0f<miles/hour>
```

このような注釈は、プリミティブ型から、リテラルの型を変更 (など`float`) ディメンションが指定された型になど`float<cm>`または、この場合、`float<miles/hour>`します。 単位の注釈の`<1>`無次元数量、およびその型が単位パラメーターがないプリミティブ型と同じことを示します。

測定単位の種類は、浮動小数点または符号付き整数型、角かっこで、追加の単体注釈と共にします。 変換の種類を記述するときにそのため、 `g` (グラム) に`kg`(キログラム)、次のように型を記述します。

```fsharp
let convertg2kg (x : float<g>) = x / 1000.0<g/kg>
```

測定単位では、コンパイル単位のチェックに使用されますが、実行時環境では保存されません。 そのため、パフォーマンスは影響ありません。

測定単位は、浮動小数点型の場合は; がだけでなく、任意の型に適用できます。ただし、唯一の浮動小数点型は、整数型、および 10 進数データ型の次元はサポートの数量を署名しました。 したがって、プリミティブ型とこれらのプリミティブ型が含まれている集計は、測定単位を使用する意味のみ実行します。

次の例では、測定単位の使用を示します。

[!code-fsharp[Main](../../../samples/snippets/fsharp/lang-ref-2/snippet6901.fs)]

次のコード例は、無次元の浮動小数点数からディメンションが指定された浮動小数点値に変換する方法を示しています。 乗算、1.0、1.0 に次元を適用します。 ような関数を抽象化することができます`degreesFahrenheit`します。

また、無次元の浮動小数点数を予想される関数にディメンションが指定された値を渡すと、ときにする必要があります単位をキャンセルまたはにキャスト`float`を使用して、`float`演算子。 除算では、この例では、`1.0<degC>`に対する引数の`printf`ため`printf`無次元の数量が必要です。

[!code-fsharp[Main](../../../samples/snippets/fsharp/lang-ref-2/snippet6902.fs)]

次の例のセッションからの出力と次のコードへの入力を示します。

```
Enter a temperature in degrees Fahrenheit.
90
That temperature in degrees Celsius is    32.22.
```

## <a name="using-generic-units"></a>汎用的な単位を使用します。

関連する測定単位を持つデータを操作するジェネリック関数を記述できます。 これを行う、型パラメーターとしてジェネリック単体と型を指定することで、次のコード例で示すようにします。

[!code-fsharp[Main](../../../samples/snippets/fsharp/lang-ref-2/snippet6903.fs)]

## <a name="creating-aggregate-types-with-generic-units"></a>汎用的な単位に集約型の作成

次のコードでは、一般的なユニットがある個々 の浮動小数点値で構成される集計の種類を作成する方法を示します。 これにより、さまざまな単位で動作する 1 つの型を作成できます。 また、汎用的なユニットでは、単位の 1 つのセットを持つジェネリック型が異なる単位のセットと同じジェネリック型は異なる型であることを確認してタイプ セーフが保持されます。 この手法の基礎は、`Measure`型パラメーターに属性を適用できます。

[!code-fsharp[Main](../../../samples/snippets/fsharp/lang-ref-2/snippet6904.fs)]

## <a name="units-at-runtime"></a>実行時の単位

測定単位は、静的な型をチェックするために使用されます。 浮動小数点値がコンパイルされると、測定単位排除されるので、実行時に単位は失われます。 そのため、実行時に単位のチェックに依存する機能を実装するあらゆる試みでは、このことはできません。 たとえば、実装、`ToString`単位を印刷する関数のことはできません。

## <a name="conversions"></a>変換

ユニットを持つ型に変換する (たとえば、 `float<'u>`) ユニットがない型には、標準変換関数を使用することができます。 たとえば、使用することができます`float`に変換する、`float`次のコードに示すように 単位がない値。

[!code-fsharp[Main](../../../samples/snippets/fsharp/lang-ref-2/snippet6905.fs)]

単位のない値をユニットの値に変換するには、適切な単位で注釈が付けられる 1 つまたは 1.0 の値で乗算できます。 ただし、相互運用性レイヤーを記述するためもユニット単位のない値を値に変換するのに使用できるいくつかの明示的な関数です。 うち、 [Microsoft.FSharp.Core.LanguagePrimitives](https://msdn.microsoft.com/library/69d08ac5-5d51-4c20-bf1e-850fd312ece3)モジュール。 例では、単位から変換する、`float`を`float<cm>`を使用して、 [FloatWithMeasure](https://msdn.microsoft.com/library/69520bc7-d67b-46b8-9004-7cac9646b8d9)次のコードに示すように、します。

[!code-fsharp[Main](../../../samples/snippets/fsharp/lang-ref-2/snippet6906.fs)]

## <a name="units-of-measure-in-the-f-core-library"></a>F# コア ライブラリでの測定単位

単体のライブラリが表示されます、`FSharp.Data.UnitSystems.SI`名前空間。 両方の形式のシンボルの SI 単位が含まれています (など`m`メーター) で、`UnitSymbols`サブ名前空間との完全名 (など`meter`メーター) で、`UnitNames`サブ名前空間。

## <a name="see-also"></a>関連項目

- [F# 言語リファレンス](index.md)
