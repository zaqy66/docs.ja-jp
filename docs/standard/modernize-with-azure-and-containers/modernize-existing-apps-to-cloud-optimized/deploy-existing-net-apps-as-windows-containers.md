---
title: Windows コンテナーとして既存の .NET アプリをデプロイします。
description: Azure クラウドおよび Windows コンテナーで既存の .NET アプリケーションを近代化 |Windows コンテナーとして既存の .NET アプリをデプロイします。
author: CESARDELATORRE
ms.author: wiwagn
ms.date: 04/29/2018
ms.openlocfilehash: 646acc6fd14c1ff85593dbf6074f0d03d86f04bd
ms.sourcegitcommit: ccd8c36b0d74d99291d41aceb14cf98d74dc9d2b
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 12/10/2018
ms.locfileid: "53143758"
---
# <a name="deploy-existing-net-apps-as-windows-containers"></a><span data-ttu-id="a76cf-103">Windows コンテナーとして既存の .NET アプリをデプロイします。</span><span class="sxs-lookup"><span data-stu-id="a76cf-103">Deploy existing .NET apps as Windows containers</span></span>

<span data-ttu-id="a76cf-104">基づく Windows コンテナーのデプロイでは、クラウドに最適化されたアプリケーションとクラウド ネイティブ アプリケーションに適用されます。</span><span class="sxs-lookup"><span data-stu-id="a76cf-104">Deployments that are based on Windows Containers are applicable to Cloud-Optimized applications and Cloud-Native applications.</span></span>

<span data-ttu-id="a76cf-105">ただし、このガイドでと、特に、次のセクションでは、そのほとんどの場合での Windows コンテナーを使用して*クラウドに最適化された*アプリケーション、アプリケーションを再設計する必要はありません。</span><span class="sxs-lookup"><span data-stu-id="a76cf-105">However, in this guide and especially in the following sections, it mostly focuses on using Windows Containers for *Cloud-Optimized* applications where you don’t need to rearchitect your application.</span></span>

## <a name="what-are-containers-linux-or-windows"></a><span data-ttu-id="a76cf-106">コンテナーとは</span><span class="sxs-lookup"><span data-stu-id="a76cf-106">What are containers?</span></span> <span data-ttu-id="a76cf-107">(Linux または Windows)</span><span class="sxs-lookup"><span data-stu-id="a76cf-107">(Linux or Windows)</span></span>

<span data-ttu-id="a76cf-108">コンテナーは、分離された独自のパッケージにアプリケーションをラップする方法です。</span><span class="sxs-lookup"><span data-stu-id="a76cf-108">Containers are a way to wrap up an application into its own isolated package.</span></span> <span data-ttu-id="a76cf-109">コンテナーで、アプリケーションは、コンテナーの外部に存在するアプリケーションやプロセスによって影響はありません。</span><span class="sxs-lookup"><span data-stu-id="a76cf-109">In its container, the application is not affected by applications or processes that exist outside of the container.</span></span> <span data-ttu-id="a76cf-110">すべてのアプリケーションに依存実行が正常にプロセスがコンテナー内では。</span><span class="sxs-lookup"><span data-stu-id="a76cf-110">Everything the application depends on to run successfully as a process is inside the container.</span></span> <span data-ttu-id="a76cf-111">任意の場所、コンテナーは移動が、アプリケーションの要件が常に満たされる直接的な依存関係の観点から (ライブラリの依存関係やランタイム、) を実行するために必要なすべてのものがこれにバンドルされているためです。</span><span class="sxs-lookup"><span data-stu-id="a76cf-111">Wherever the container might move, the requirements of the application will always be met, in terms of direct dependencies, because it is bundled with everything that it needs to run (library dependencies, runtimes, and so on).</span></span>

<span data-ttu-id="a76cf-112">コンテナーの主な特性のことです環境同じ異なる展開間で、コンテナー自体が必要なすべての依存関係と共に含まれているためです。</span><span class="sxs-lookup"><span data-stu-id="a76cf-112">The main characteristic of a container is that it makes the environment the same across different deployments because the container itself comes with all the dependencies it needs.</span></span> <span data-ttu-id="a76cf-113">コンピューターにアプリケーションをデバッグし、別のコンピューターに保証される同じ環境にデプロイできます。</span><span class="sxs-lookup"><span data-stu-id="a76cf-113">You can debug the application on your machine, and then deploy it to another machine, with the same environment guaranteed.</span></span>

<span data-ttu-id="a76cf-114">コンテナーは、コンテナー イメージのインスタンスです。</span><span class="sxs-lookup"><span data-stu-id="a76cf-114">A container is an instance of a container image.</span></span> <span data-ttu-id="a76cf-115">コンテナー イメージは、アプリや (snapshot) などのサービスをパッケージ化し、信頼性が高く、再現可能な方法でデプロイする方法です。</span><span class="sxs-lookup"><span data-stu-id="a76cf-115">A container image is a way to package an app or service (like a snapshot), and then deploy it in a reliable and reproducible way.</span></span> <span data-ttu-id="a76cf-116">Docker ではないことのみをテクノロジのも、哲学やプロセスで、たとえばします。</span><span class="sxs-lookup"><span data-stu-id="a76cf-116">You could say that Docker is not only a technology-it's also a philosophy and a process.</span></span>

<span data-ttu-id="a76cf-117">業界全体「の展開の単位」になっているコンテナーが 1 日より一般的になると、</span><span class="sxs-lookup"><span data-stu-id="a76cf-117">As containers daily become more common, they are becoming an industry-wide "unit of deployment."</span></span>

## <a name="benefits-of-containers-docker-engine-on-linux-or-windows"></a><span data-ttu-id="a76cf-118">コンテナー (Linux または Windows 上の Docker エンジン) の利点</span><span class="sxs-lookup"><span data-stu-id="a76cf-118">Benefits of containers (Docker Engine on Linux or Windows)</span></span>

<span data-ttu-id="a76cf-119">可能性がありますも、このコンテナーを使用してアプリケーションの構築での構築、配布、およびすべてのインフラストラクチャの間で、任意のアプリケーションを実行している機敏性が大幅に向上軽量の構成要素として定義します。</span><span class="sxs-lookup"><span data-stu-id="a76cf-119">Building applications by using containers-which also might be defined as lightweight building blocks-offers a significant increase in agility for building, shipping, and running any application, across any infrastructure.</span></span>

<span data-ttu-id="a76cf-120">コンテナーでは、開発から運用環境に Microsoft 開発者ツール、オペレーティング システム、およびクラウド間での Docker 統合により、コード変更をほとんどまたはまったくないアプリを実行できます。</span><span class="sxs-lookup"><span data-stu-id="a76cf-120">With containers, you can take any app from development to production with little or no code change, thanks to Docker integration across Microsoft developer tools, operating systems, and cloud.</span></span>

<span data-ttu-id="a76cf-121">プレーンな Vm を展開するときに既に Vm に ASP.NET アプリを展開するためにメソッドがあります。</span><span class="sxs-lookup"><span data-stu-id="a76cf-121">When you deploy to plain VMs, you probably already have a method in place for deploying ASP.NET apps to your VMs.</span></span> <span data-ttu-id="a76cf-122">ただし、メソッドが複数の手動手順や複雑な自動化されたプロセスを含まれて、Puppet などの展開ツールまたは同様のツールを使用している可能性がありますは。</span><span class="sxs-lookup"><span data-stu-id="a76cf-122">It's likely, though, that your method involves multiple manual steps or complex automated processes by using a deployment tool like Puppet, or a similar tool.</span></span> <span data-ttu-id="a76cf-123">構成項目の変更、アプリケーション、サーバー間のコンテンツのコピー、およびテスト後に、.msi の設定に基づく対話型セットアップ プログラムを実行するようにタスクを実行する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a76cf-123">You might need to perform tasks like modifying configuration items, copying application content between servers, and running interactive setup programs based on .msi setups, followed by testing.</span></span> <span data-ttu-id="a76cf-124">展開でこれらの手順では、デプロイに時間とリスクを追加します。</span><span class="sxs-lookup"><span data-stu-id="a76cf-124">All those steps in the deployment add time and risk to deployments.</span></span> <span data-ttu-id="a76cf-125">依存関係がターゲット環境に存在しないときにエラーが表示されます。</span><span class="sxs-lookup"><span data-stu-id="a76cf-125">You will get failures whenever a dependency is not present in the target environment.</span></span>

<span data-ttu-id="a76cf-126">、Windows コンテナーでアプリケーションのパッケージ化のプロセスが完全に自動化されます。</span><span class="sxs-lookup"><span data-stu-id="a76cf-126">In Windows Containers, the process of packaging applications is fully automated.</span></span> <span data-ttu-id="a76cf-127">Windows コンテナーは、自動更新とコンテナーのデプロイのロールバックを提供する Docker プラットフォームに基づいています。</span><span class="sxs-lookup"><span data-stu-id="a76cf-127">Windows Containers is based on the Docker platform, which offers automatic updates and rollbacks for container deployments.</span></span> <span data-ttu-id="a76cf-128">Docker エンジンを使用してから取得する主な改善は、すべての依存関係と共になど、アプリケーションのスナップショットは、のイメージを作成することです。</span><span class="sxs-lookup"><span data-stu-id="a76cf-128">The main improvement you get from using the Docker engine is that you create images, which are like snapshots of your application, with all its dependencies.</span></span> <span data-ttu-id="a76cf-129">イメージは、Docker イメージ (Windows コンテナー イメージをこの場合) です。</span><span class="sxs-lookup"><span data-stu-id="a76cf-129">The images are Docker images (a Windows container image, in this case).</span></span> <span data-ttu-id="a76cf-130">イメージは、ソース コードに戻ることがなく、コンテナーで ASP.NET アプリを実行します。</span><span class="sxs-lookup"><span data-stu-id="a76cf-130">The images run ASP.NET apps in containers, without going back to source code.</span></span> <span data-ttu-id="a76cf-131">コンテナーのスナップショットでは、展開の単位になります。</span><span class="sxs-lookup"><span data-stu-id="a76cf-131">The container snapshot becomes the unit of deployment.</span></span>

<span data-ttu-id="a76cf-132">多くの組織では、次の理由で既存のモノリシック アプリケーションをコンテナー化は。</span><span class="sxs-lookup"><span data-stu-id="a76cf-132">Many organizations are containerizing existing monolithic applications for the following reasons:</span></span>

-   <span data-ttu-id="a76cf-133">**強化された展開による俊敏性をリリース**します。</span><span class="sxs-lookup"><span data-stu-id="a76cf-133">**Release agility through improved deployment**.</span></span> <span data-ttu-id="a76cf-134">コンテナーは、開発と運用の間で一貫したデプロイ コントラクトを提供します。</span><span class="sxs-lookup"><span data-stu-id="a76cf-134">Containers offer a consistent deployment contract between development and operations.</span></span> <span data-ttu-id="a76cf-135">コンテナーを使用する場合と開発者が聞こえません、「機能は私のコンピューターでは、なぜ実稼働環境ででしょうか。」</span><span class="sxs-lookup"><span data-stu-id="a76cf-135">When you use containers, you won't hear developers say, "It works on my machine, why not in production?"</span></span> <span data-ttu-id="a76cf-136">できます言われるように、「実行のコンテナーとして運用環境で実行するためです」</span><span class="sxs-lookup"><span data-stu-id="a76cf-136">They can say, "It runs as a container, so it will run in production."</span></span> <span data-ttu-id="a76cf-137">すべての依存関係と共にパッケージ化されたアプリケーションは、サポートされているコンテナー ベースの環境で実行できます。</span><span class="sxs-lookup"><span data-stu-id="a76cf-137">The packaged application, with all its dependencies, can be executed in any supported container-based environment.</span></span> <span data-ttu-id="a76cf-138">すべての展開ターゲット (開発、QA、ステージング、実稼働) で実行する方法は、実行されます。</span><span class="sxs-lookup"><span data-stu-id="a76cf-138">It will run the way it was intended to run in all deployment targets (dev, QA, staging, production).</span></span> <span data-ttu-id="a76cf-139">1 つの段階から次に、展開を大幅に強化するに移動したときに、コンテナーがほとんどあつれきを排除し、すばやく出荷することができます。</span><span class="sxs-lookup"><span data-stu-id="a76cf-139">Containers eliminate most frictions when they move from one stage to the next, which greatly improves deployment, and you can ship faster.</span></span>

-   <span data-ttu-id="a76cf-140">**コスト削減**します。</span><span class="sxs-lookup"><span data-stu-id="a76cf-140">**Cost reductions**.</span></span> <span data-ttu-id="a76cf-141">コンテナーは、統合と既存のハードウェア、またはハードウェアの単位あたりのより高密度でアプリケーションを実行してから削除するか、コストの削減につながります。</span><span class="sxs-lookup"><span data-stu-id="a76cf-141">Containers lead to lower costs, either by the consolidation and removal of existing hardware, or from running applications at a higher density per unit of hardware.</span></span>

-   <span data-ttu-id="a76cf-142">**移植性**します。</span><span class="sxs-lookup"><span data-stu-id="a76cf-142">**Portability**.</span></span> <span data-ttu-id="a76cf-143">コンテナーとは、モジュール化されたポータブルです。</span><span class="sxs-lookup"><span data-stu-id="a76cf-143">Containers are modular and portable.</span></span> <span data-ttu-id="a76cf-144">Docker コンテナーは、任意のサーバー オペレーティング システム (Linux と Windows)、主要なパブリック クラウド (Microsoft Azure、Amazon AWS、Google、IBM) で、オンプレミス/プライベートまたはハイブリッド クラウド環境でサポートされます。</span><span class="sxs-lookup"><span data-stu-id="a76cf-144">Docker containers are supported on any server operating system (Linux and Windows), in any major public cloud (Microsoft Azure, Amazon AWS, Google, IBM), and in on-premises and private or hybrid cloud environments.</span></span>

-   <span data-ttu-id="a76cf-145">**コントロール**します。</span><span class="sxs-lookup"><span data-stu-id="a76cf-145">**Control**.</span></span> <span data-ttu-id="a76cf-146">コンテナーは、コンテナー レベルで制御される柔軟かつセキュリティで保護された環境を提供します。</span><span class="sxs-lookup"><span data-stu-id="a76cf-146">Containers offer a flexible and secure environment that's controlled at the container level.</span></span> <span data-ttu-id="a76cf-147">コンテナーのセキュリティで保護された、分離、およびコンテナーの実行ポリシーの制約を設定しても制限されています。</span><span class="sxs-lookup"><span data-stu-id="a76cf-147">A container can be secured, isolated, and even limited by setting execution constraint policies on the container.</span></span> <span data-ttu-id="a76cf-148">Windows コンテナーに関するセクションで詳細なとしては、Windows Server 2016 と HYPER-V コンテナーは、追加のエンタープライズ サポート オプションを提供します。</span><span class="sxs-lookup"><span data-stu-id="a76cf-148">As detailed in the section about Windows Containers, Windows Server 2016 and Hyper-V containers offer additional enterprise support options.</span></span>

<span data-ttu-id="a76cf-149">機敏性、移植性、およびコントロールで大幅に改善を開発およびアプリケーションを管理するコンテナーを使用すると、オブジェクトは最終的に大幅なコストの削減につながります。</span><span class="sxs-lookup"><span data-stu-id="a76cf-149">Significant improvements in agility, portability, and control ultimately lead to significant cost reductions when you use containers to develop and maintain applications.</span></span>

## <a name="what-is-docker"></a><span data-ttu-id="a76cf-150">Docker について</span><span class="sxs-lookup"><span data-stu-id="a76cf-150">What is Docker?</span></span>

<span data-ttu-id="a76cf-151">[Docker](https://www.docker.com/)は、[オープン ソース プロジェクト](https://github.com/docker/docker)クラウドまたはオンプレミスで実行できる移植可能な自己完結型コンテナーとしてアプリケーションの展開を自動化します。</span><span class="sxs-lookup"><span data-stu-id="a76cf-151">[Docker](https://www.docker.com/) is an [open-source project](https://github.com/docker/docker) that automates the deployment of applications as portable, self-sufficient containers that can run in the cloud or on-premises.</span></span> <span data-ttu-id="a76cf-152">Docker は、このテクノロジを促進および進化させる[会社](https://www.docker.com/)でもあります。</span><span class="sxs-lookup"><span data-stu-id="a76cf-152">Docker is also a [company](https://www.docker.com/) that promotes and evolves this technology.</span></span> <span data-ttu-id="a76cf-153">会社は、クラウド、Linux、および Windows のベンダーなどの Microsoft と共同で動作します。</span><span class="sxs-lookup"><span data-stu-id="a76cf-153">The company works in collaboration with cloud, Linux, and Windows vendors, including Microsoft.</span></span>

![](./media/image6.png)

> <span data-ttu-id="a76cf-154">**図 4 ~ 6 です。**</span><span class="sxs-lookup"><span data-stu-id="a76cf-154">**Figure 4-6.**</span></span> <span data-ttu-id="a76cf-155">Docker は、ハイブリッド クラウドのすべてのレイヤーでコンテナーを展開します。</span><span class="sxs-lookup"><span data-stu-id="a76cf-155">Docker deploys containers at all layers of the hybrid cloud</span></span>

<span data-ttu-id="a76cf-156">他の仮想マシンで使い慣れたコンテナーされないように見えますが非常によく似てします。</span><span class="sxs-lookup"><span data-stu-id="a76cf-156">To someone familiar with virtual machines, containers might appear to be remarkably similar.</span></span> <span data-ttu-id="a76cf-157">コンテナー、オペレーティング システムを実行するには、ファイル システムが、および物理または仮想コンピューター システムと同様、ネットワーク経由でアクセスできます。</span><span class="sxs-lookup"><span data-stu-id="a76cf-157">A container runs an operating system, has a file system, and can be accessed over a network, just like a physical or virtual computer system.</span></span> <span data-ttu-id="a76cf-158">ただし、テクノロジ、およびコンテナーの背後にある概念は仮想マシンから大幅に異なります。</span><span class="sxs-lookup"><span data-stu-id="a76cf-158">However, the technology and concepts behind containers are vastly different from virtual machines.</span></span> <span data-ttu-id="a76cf-159">開発者の観点からコンテナーを扱う必要があるより 1 つのプロセスのようにします。</span><span class="sxs-lookup"><span data-stu-id="a76cf-159">From a developer point of view, a container must be treated more like a single process.</span></span> <span data-ttu-id="a76cf-160">実際には、コンテナーには、1 つのプロセスの 1 つのエントリ ポイントがあります。</span><span class="sxs-lookup"><span data-stu-id="a76cf-160">In fact, a container has a single entry point for one process.</span></span>

<span data-ttu-id="a76cf-161">Docker コンテナー (わかりやすくするため、*コンテナー*) Linux と Windows でネイティブに実行できます。</span><span class="sxs-lookup"><span data-stu-id="a76cf-161">Docker containers (for simplicity, *containers*) can run natively on Linux and Windows.</span></span> <span data-ttu-id="a76cf-162">Windows コンテナーを Windows ホスト (ホスト サーバーまたは VM) でのみ実行正規のコンテナーを実行するときにし、Linux コンテナーを Linux ホストでのみ実行できます。</span><span class="sxs-lookup"><span data-stu-id="a76cf-162">When running regular containers, Windows containers can run only on Windows hosts (a host server or a VM), and Linux containers can run only on Linux hosts.</span></span> <span data-ttu-id="a76cf-163">ただし、最近のバージョンの Windows Server と HYPER-V コンテナーでは、Linux コンテナーも実行できますネイティブ Windows Server で現在、Windows Server のコンテナーでのみ使用できますが、HYPER-V の分離テクノロジを使用しています。</span><span class="sxs-lookup"><span data-stu-id="a76cf-163">However, in recent versions of Windows Server and Hyper-V containers, a Linux container also can run natively on Windows Server by using the Hyper-V isolation technology that currently is available only in Windows Server Containers.</span></span>

<span data-ttu-id="a76cf-164">近い将来に可能であり、さらに一般的な Linux と Windows の両方のコンテナーが混在する環境になります。</span><span class="sxs-lookup"><span data-stu-id="a76cf-164">In the near future, mixed environments that have both Linux and Windows containers will be possible and even common.</span></span>

## <a name="benefits-of-windows-containers-for-your-existing-net-applications"></a><span data-ttu-id="a76cf-165">既存の .NET アプリケーションの Windows コンテナーの利点があります。</span><span class="sxs-lookup"><span data-stu-id="a76cf-165">Benefits of Windows Containers for your existing .NET applications</span></span>

<span data-ttu-id="a76cf-166">Windows コンテナーを使用する利点は、基本的に一般にコンテナーから取得した同じ利点があります。</span><span class="sxs-lookup"><span data-stu-id="a76cf-166">The benefits of using Windows Containers are fundamentally the same benefits you get from containers in general.</span></span> <span data-ttu-id="a76cf-167">Windows コンテナーを使用すると、機敏性、移植性、および制御が大幅に向上についてです。</span><span class="sxs-lookup"><span data-stu-id="a76cf-167">Using Windows Containers is about greatly improving agility, portability, and control.</span></span>

<span data-ttu-id="a76cf-168">既存の .NET アプリケーションでは、.NET Framework を使用して作成されたこれらのアプリケーションを参照してください。</span><span class="sxs-lookup"><span data-stu-id="a76cf-168">Existing .NET applications refer to those applications that were created using the .NET Framework.</span></span> <span data-ttu-id="a76cf-169">たとえば、従来の ASP.NET web アプリケーションがあります-新しいしてクロス プラットフォームを実行する .NET Core を使用していない Linux、Windows、MacOS でします。</span><span class="sxs-lookup"><span data-stu-id="a76cf-169">For example, they might be traditional ASP.NET web applications-they don't use .NET Core, which is newer and runs cross-platform on Linux, Windows, and MacOS.</span></span>

<span data-ttu-id="a76cf-170">.NET Framework の主な依存関係では、Windows です。</span><span class="sxs-lookup"><span data-stu-id="a76cf-170">The main dependency in the .NET Framework is Windows.</span></span> <span data-ttu-id="a76cf-171">また、従来の ASP.NET では、IIS や System.Web などのセカンダリの依存関係もあります。</span><span class="sxs-lookup"><span data-stu-id="a76cf-171">It also has secondary dependencies, like IIS, and System.Web in traditional ASP.NET.</span></span>

<span data-ttu-id="a76cf-172">.NET Framework アプリケーションは、期間、Windows で実行する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a76cf-172">A .NET Framework application must run on Windows, period.</span></span> <span data-ttu-id="a76cf-173">既存の .NET Framework アプリケーションをコンテナー化するかどうか、または .NET Core への移行に投資したくないできません (「場合は正常に動作しない移行」)、コンテナーがある唯一の選択肢は Windows コンテナーを使用して、します。</span><span class="sxs-lookup"><span data-stu-id="a76cf-173">If you want to containerize existing .NET Framework applications and you can't or don't want to invest in a migration to .NET Core ("If it works properly, don't migrate it"), the only choice you have for containers is to use Windows Containers.</span></span>

<span data-ttu-id="a76cf-174">したがって、Windows コンテナーの主な利点の 1 つを提供するを通じて Windows コンテナーで実行されている既存の .NET Framework アプリケーションを近代化する方法です。</span><span class="sxs-lookup"><span data-stu-id="a76cf-174">So, one of the main benefits of Windows Containers is that they offer you a way to modernize your existing .NET Framework applications that are running on Windows-through containerization.</span></span> <span data-ttu-id="a76cf-175">最終的には、Windows コンテナーを取得するコンテナーの俊敏性、移植性、およびより適切に制御を使用して、探している利点。</span><span class="sxs-lookup"><span data-stu-id="a76cf-175">Ultimately, Windows Containers gets you the benefits that you are looking for by using containers-agility, portability, and better control.</span></span>

## <a name="choose-an-os-to-target-with-net-based-containers"></a><span data-ttu-id="a76cf-176">対象とする OS を選択します。NET ベースのコンテナー</span><span class="sxs-lookup"><span data-stu-id="a76cf-176">Choose an OS to target with .NET-based containers</span></span>

<span data-ttu-id="a76cf-177">Docker と .NET Framework と .NET Core の違いによってサポートされているオペレーティング システムの多様性を指定するには、特定の OS と特定のバージョンを使用しているフレームワークに基づくをターゲットする必要があります。</span><span class="sxs-lookup"><span data-stu-id="a76cf-177">Given the diversity of operating systems that are supported by Docker, as well as the differences between .NET Framework and .NET Core, you should target a specific OS and specific versions based on the framework you are using.</span></span>

<span data-ttu-id="a76cf-178">Windows の場合、Windows Server Core または Windows Nano Server を使用できます。</span><span class="sxs-lookup"><span data-stu-id="a76cf-178">For Windows, you can use Windows Server Core or Windows Nano Server.</span></span> <span data-ttu-id="a76cf-179">これらの Windows バージョンでは、.NET Framework または .NET Core アプリケーションで必要となる (IIS と Kestrel のような自己ホスト型 web サーバー) のような異なる特性を提供します。</span><span class="sxs-lookup"><span data-stu-id="a76cf-179">These Windows versions provide different characteristics (like IIS versus a self-hosted web server like Kestrel) that might be needed by .NET Framework or .NET Core applications.</span></span>

<span data-ttu-id="a76cf-180">Linux の場合、複数のディストリビューションを利用できます。また、Linux は公式の .NET Docker イメージ (Debian など) でサポートされています。</span><span class="sxs-lookup"><span data-stu-id="a76cf-180">For Linux, multiple distros are available and supported in official .NET Docker images (like Debian).</span></span>

<span data-ttu-id="a76cf-181">図 4-7 には、.NET Framework のアプリのバージョンに応じて、対象できます OS バージョンが表示されます。</span><span class="sxs-lookup"><span data-stu-id="a76cf-181">Figure 4-7 shows OS versions that you can target, depending on the app's version of the .NET Framework.</span></span>

![](./media/image7.png)

> <span data-ttu-id="a76cf-182">**図 4-7。**</span><span class="sxs-lookup"><span data-stu-id="a76cf-182">**Figure 4-7.**</span></span> <span data-ttu-id="a76cf-183">.NET Framework のバージョンに基づき、ターゲットのオペレーティング システム</span><span class="sxs-lookup"><span data-stu-id="a76cf-183">Operating systems to target based on .NET Framework version</span></span>

<span data-ttu-id="a76cf-184">.NET Framework アプリケーションに基づく既存または従来のアプリケーションの移行のシナリオでは、メインの依存関係は、Windows と IIS では。</span><span class="sxs-lookup"><span data-stu-id="a76cf-184">In migration scenarios for existing or legacy applications that are based on .NET Framework applications, the main dependencies are on Windows and IIS.</span></span> <span data-ttu-id="a76cf-185">唯一の選択肢では、Windows Server Core と .NET Framework に基づいて Docker イメージを使用します。</span><span class="sxs-lookup"><span data-stu-id="a76cf-185">Your only option is to use Docker images based on Windows Server Core and the .NET Framework.</span></span>

<span data-ttu-id="a76cf-186">Dockerfile ファイルにイメージ名を追加する場合は、.NET Framework ベースの Windows コンテナー イメージ用の次の例のように、タグを使用して、オペレーティング システムとバージョンを選択できます。</span><span class="sxs-lookup"><span data-stu-id="a76cf-186">When you add the image name to your Dockerfile file, you can select the operating system and version by using a tag, as in the following examples for .NET Framework-based Windows container images:</span></span>

> | <span data-ttu-id="a76cf-187">**タグ**</span><span class="sxs-lookup"><span data-stu-id="a76cf-187">**Tag**</span></span> | <span data-ttu-id="a76cf-188">**システムとバージョン**</span><span class="sxs-lookup"><span data-stu-id="a76cf-188">**System and version**</span></span> |
> |---|---|
> | <span data-ttu-id="a76cf-189">**microsoft/dotnet-framework:4.x-windowsservercore**</span><span class="sxs-lookup"><span data-stu-id="a76cf-189">**microsoft/dotnet-framework:4.x-windowsservercore**</span></span> | <span data-ttu-id="a76cf-190">.NET framework 4.x を Windows Server Core</span><span class="sxs-lookup"><span data-stu-id="a76cf-190">.NET Framework 4.x on Windows Server Core</span></span> |
> | <span data-ttu-id="a76cf-191">**microsoft/aspnet:4.x-windowsservercore**</span><span class="sxs-lookup"><span data-stu-id="a76cf-191">**microsoft/aspnet:4.x-windowsservercore**</span></span> | <span data-ttu-id="a76cf-192">.NET framework 4.x の Windows Server core、ASP.NET の他のカスタマイズ</span><span class="sxs-lookup"><span data-stu-id="a76cf-192">.NET Framework 4.x with additional ASP.NET customization, on Windows Server Core</span></span> |

<span data-ttu-id="a76cf-193">.NET Core (Linux および Windows 用はクロス プラットフォーム)、タグは次のようになります。</span><span class="sxs-lookup"><span data-stu-id="a76cf-193">For .NET Core (cross-platform for Linux and Windows), the tags would look like the following:</span></span>

> | <span data-ttu-id="a76cf-194">**タグ**</span><span class="sxs-lookup"><span data-stu-id="a76cf-194">**Tag**</span></span> | <span data-ttu-id="a76cf-195">**システムとバージョン**</span><span class="sxs-lookup"><span data-stu-id="a76cf-195">**System and version**</span></span>
> |---|---|
> | <span data-ttu-id="a76cf-196">**microsoft/dotnet:2.0.0-runtime**</span><span class="sxs-lookup"><span data-stu-id="a76cf-196">**microsoft/dotnet:2.0.0-runtime**</span></span> | <span data-ttu-id="a76cf-197">Linux 上のランタイムのみの .NET core 2.0</span><span class="sxs-lookup"><span data-stu-id="a76cf-197">.NET Core 2.0 runtime-only on Linux</span></span> |
> | <span data-ttu-id="a76cf-198">**microsoft/dotnet:2.0.0-runtime-nanoserver**</span><span class="sxs-lookup"><span data-stu-id="a76cf-198">**microsoft/dotnet:2.0.0-runtime-nanoserver**</span></span> | <span data-ttu-id="a76cf-199">.NET core 2.0 Windows Nano Server でのランタイムのみ</span><span class="sxs-lookup"><span data-stu-id="a76cf-199">.NET Core 2.0 runtime-only on Windows Nano Server</span></span> |

### <a name="multi-arch-images"></a><span data-ttu-id="a76cf-200">マルチ アーキテクチャ イメージ</span><span class="sxs-lookup"><span data-stu-id="a76cf-200">Multi-arch images</span></span>

<span data-ttu-id="a76cf-201">2017 年中頃で以降は、使用することもできる新機能と呼ばれる Docker で[マルチアーチ](https://github.com/moby/moby/issues/15866)イメージ。</span><span class="sxs-lookup"><span data-stu-id="a76cf-201">Beginning in mid-2017, you also can use a new feature in Docker called [multi-arch](https://github.com/moby/moby/issues/15866) images.</span></span> <span data-ttu-id="a76cf-202">.NET core Docker イメージには、マルチ アーキテクチャ タグを使用できます。</span><span class="sxs-lookup"><span data-stu-id="a76cf-202">.NET Core Docker images can use multi-arch tags.</span></span> <span data-ttu-id="a76cf-203">Dockerfile ファイルを対象となるオペレーティング システムを定義する必要が不要になった。</span><span class="sxs-lookup"><span data-stu-id="a76cf-203">Your Dockerfile files no longer need to define the operating system that you are targeting.</span></span> <span data-ttu-id="a76cf-204">マルチ アーキテクチャの機能は、複数のコンピューター構成全体で使用する 1 つのタグを使用できます。</span><span class="sxs-lookup"><span data-stu-id="a76cf-204">The multi-arch feature allows a single tag to be used across multiple machine configurations.</span></span> <span data-ttu-id="a76cf-205">たとえば、マルチ アーキテクチャは、1 つの一般的なタグ使用できます: **microsoft/dotnet:2.0.0-runtime**します。</span><span class="sxs-lookup"><span data-stu-id="a76cf-205">For instance, with multi-arch, you can use one common tag: **microsoft/dotnet:2.0.0-runtime**.</span></span> <span data-ttu-id="a76cf-206">Linux コンテナーの環境からそのタグをプルする場合、Debian ベースのイメージを取得します。</span><span class="sxs-lookup"><span data-stu-id="a76cf-206">If you pull that tag from a Linux container environment, you get the Debian-based image.</span></span> <span data-ttu-id="a76cf-207">Windows コンテナーの環境からそのタグをプルする Nano Server ベースのイメージを取得します。</span><span class="sxs-lookup"><span data-stu-id="a76cf-207">If you pull that tag from a Windows container environment, you get the Nano Server-based image.</span></span>

<span data-ttu-id="a76cf-208">.NET Framework のイメージでは、従来の .NET Framework のみの Windows をサポートしているため、マルチ アーキテクチャの機能を使用できません。</span><span class="sxs-lookup"><span data-stu-id="a76cf-208">For .NET Framework images, because the traditional .NET Framework supports only Windows, you cannot use the multi-arch feature.</span></span>

## <a name="windows-container-types"></a><span data-ttu-id="a76cf-209">Windows コンテナーの種類</span><span class="sxs-lookup"><span data-stu-id="a76cf-209">Windows container types</span></span>

<span data-ttu-id="a76cf-210">Linux のコンテナーと同様、Windows Server コンテナーは、Docker エンジンを使用して管理されます。</span><span class="sxs-lookup"><span data-stu-id="a76cf-210">Like Linux containers, Windows Server containers are managed by using Docker Engine.</span></span> <span data-ttu-id="a76cf-211">Linux コンテナーとは異なりは、Windows コンテナーは、2 つの異なるコンテナー型が含まれますか、回数-Windows Server コンテナーと HYPER-V の分離を実行します。</span><span class="sxs-lookup"><span data-stu-id="a76cf-211">Unlike Linux containers, Windows containers include two different container types, or run times-Windows Server containers and Hyper-V isolation.</span></span>

<span data-ttu-id="a76cf-212">**Windows Server コンテナー**:プロセスと名前空間の分離テクノロジを使用してアプリケーションの分離を提供します。</span><span class="sxs-lookup"><span data-stu-id="a76cf-212">**Windows Server containers**: Provides application isolation through process and namespace isolation technology.</span></span> <span data-ttu-id="a76cf-213">Windows Server コンテナーは、コンテナー ホストとホストで実行されているすべてのコンテナー、カーネルを共有します。</span><span class="sxs-lookup"><span data-stu-id="a76cf-213">A Windows Server container shares a kernel with the container host and all containers that are running on the host.</span></span> <span data-ttu-id="a76cf-214">これらのコンテナーでは、悪意のあるセキュリティの境界を指定しないと、信頼できないコードを分離する未使用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a76cf-214">These containers do not provide a hostile security boundary and should not be used to isolate untrusted code.</span></span> <span data-ttu-id="a76cf-215">共有カーネル領域は、これらのコンテナーは、同じバージョンのカーネルと構成が必要です。</span><span class="sxs-lookup"><span data-stu-id="a76cf-215">Because of the shared kernel space, these containers require the same kernel version and configuration.</span></span>

<span data-ttu-id="a76cf-216">**HYPER-V による分離**:大幅に最適化された VM の各コンテナーを実行して、Windows Server コンテナーによって提供される分離を展開します。</span><span class="sxs-lookup"><span data-stu-id="a76cf-216">**Hyper-V isolation**: Expands on the isolation provided by Windows Server Containers by running each container on a highly optimized VM.</span></span> <span data-ttu-id="a76cf-217">この構成で、コンテナー ホストのカーネルは、同じホスト上の他のコンテナーでは共有されません。</span><span class="sxs-lookup"><span data-stu-id="a76cf-217">In this configuration, the kernel of the container host is not shared with other containers on the same host.</span></span> <span data-ttu-id="a76cf-218">悪意のあるマルチ テナントをホストするため、VM の同じセキュリティ保証では、これらのコンテナーが設計されています。</span><span class="sxs-lookup"><span data-stu-id="a76cf-218">These containers are designed for hostile multitenant hosting, with the same security assurances of a VM.</span></span> <span data-ttu-id="a76cf-219">これらのコンテナーは、ホストまたはホスト上の他のコンテナーとカーネルを共有しないでください、ため、異なるバージョン (サポートされているバージョン) を使用した構成をカーネルを実行できます。</span><span class="sxs-lookup"><span data-stu-id="a76cf-219">Because these containers don't share the kernel with the host or other containers on the host, they can run kernels with different versions and configurations (with supported versions).</span></span> <span data-ttu-id="a76cf-220">たとえば、Windows 10 上のすべての Windows コンテナーでは、HYPER-V による分離を使用して、カーネル バージョンの Windows Server と構成を利用します。</span><span class="sxs-lookup"><span data-stu-id="a76cf-220">For example, all Windows containers on Windows 10 use Hyper-V isolation to utilize the Windows Server kernel version and configuration.</span></span>

<span data-ttu-id="a76cf-221">HYPER-V による分離の有無で Windows コンテナーを実行すると、実行時の意思決定です。</span><span class="sxs-lookup"><span data-stu-id="a76cf-221">Running a container on Windows with or without Hyper-V isolation is a run-time decision.</span></span> <span data-ttu-id="a76cf-222">最初に、HYPER-V の分離を使用したコンテナーの作成を選択し、代わりに、Windows Server コンテナーとして実行を選択して、実行時に可能性があります。</span><span class="sxs-lookup"><span data-stu-id="a76cf-222">You might choose to create the container with Hyper-V isolation initially, and at run time, choose to run it as a Windows Server container instead.</span></span>

### <a name="additional-resources"></a><span data-ttu-id="a76cf-223">その他の技術情報</span><span class="sxs-lookup"><span data-stu-id="a76cf-223">Additional resources</span></span>

-   <span data-ttu-id="a76cf-224">**Windows コンテナーのドキュメント**</span><span class="sxs-lookup"><span data-stu-id="a76cf-224">**Windows Containers documentation**</span></span>

    [https://docs.microsoft.com/virtualization/windowscontainers/](https://docs.microsoft.com/virtualization/windowscontainers/)

-   <span data-ttu-id="a76cf-225">**Windows コンテナーの基礎**</span><span class="sxs-lookup"><span data-stu-id="a76cf-225">**Windows Containers fundamentals**</span></span>

    [https://docs.microsoft.com/virtualization/windowscontainers/about/](https://docs.microsoft.com/virtualization/windowscontainers/about/)

-   <span data-ttu-id="a76cf-226">**インフォ グラフィック:Microsoft とコンテナー**</span><span class="sxs-lookup"><span data-stu-id="a76cf-226">**Infographic: Microsoft and containers**</span></span>

    [https://info.microsoft.com/rs/157-GQE-382/images/Container%20infographic%201.4.17.pdf](https://info.microsoft.com/rs/157-GQE-382/images/Container%20infographic%201.4.17.pdf)


## <a name="the-container-ecosystem-in-azure"></a><span data-ttu-id="a76cf-227">Azure でコンテナーのエコシステム</span><span class="sxs-lookup"><span data-stu-id="a76cf-227">The container ecosystem in Azure</span></span>

<span data-ttu-id="a76cf-228">前のセクションで説明しましたが .NET アプリケーション用の特定のコンテナー イメージの詳細およびの Docker コンテナーの利点があります。</span><span class="sxs-lookup"><span data-stu-id="a76cf-228">In previous sections, it’s been explained what the benefits of Docker containers are as well as details on the specific container images for .NET applications.</span></span> <span data-ttu-id="a76cf-229">すべての一般的な情報については、開発またはアプリケーションのコンテナー格納するために不可欠です。</span><span class="sxs-lookup"><span data-stu-id="a76cf-229">All that generic information is fundamental in order to develop or containerize an application.</span></span>
<span data-ttu-id="a76cf-230">ただし、運用デプロイ環境または QA および開発/テスト環境であっても、検討するとき、Microsoft Azure は、オープンで広範なさまざまな選択肢では、(次の図に示すように) クラウドで完全なコンテナー エコシステムを提供します。</span><span class="sxs-lookup"><span data-stu-id="a76cf-230">However, when thinking about the production deployment environment or even QA and Dev/Test environments, Microsoft Azure provides an open and broad variety of choices, a full container ecosystem in the cloud (shown in the diagram below).</span></span> <span data-ttu-id="a76cf-231">特定のアプリケーションのニーズに応じて、1 つまたは別の Azure 製品を選択してください。</span><span class="sxs-lookup"><span data-stu-id="a76cf-231">Depending on your specific application’s needs, you should choose one or another Azure product.</span></span>

![](./media/image7.5.png)

> <span data-ttu-id="a76cf-232">**図 4-7.5 です。**</span><span class="sxs-lookup"><span data-stu-id="a76cf-232">**Figure 4-7.5.**</span></span> <span data-ttu-id="a76cf-233">Azure でコンテナーのエコシステム</span><span class="sxs-lookup"><span data-stu-id="a76cf-233">The container ecosystem in Azure</span></span>

<span data-ttu-id="a76cf-234">Azure では、次の製品のインフラストラクチャと見なされるコンテナーをサポートしているコンテナーのエコシステム: から</span><span class="sxs-lookup"><span data-stu-id="a76cf-234">From the container ecosystem in Azure, the following products supporting containers that are considered infrastructure:</span></span>
-   <span data-ttu-id="a76cf-235">**Azure Container Instances (ACI)**</span><span class="sxs-lookup"><span data-stu-id="a76cf-235">**Azure Container Instances (ACI)**</span></span>
-   <span data-ttu-id="a76cf-236">**Azure の仮想マシン**(とコンテナーのサポート)</span><span class="sxs-lookup"><span data-stu-id="a76cf-236">**Azure Virtual Machines** (With container's support)</span></span>
-   <span data-ttu-id="a76cf-237">**Azure の仮想マシン スケール セット**(とコンテナーのサポート)</span><span class="sxs-lookup"><span data-stu-id="a76cf-237">**Azure Virtual Machine Scale Sets** (With container's support)</span></span>

<span data-ttu-id="a76cf-238">これらの 3 つから ACI は、基になる OS のアップグレード/修正などの必要はありませんを維持する必要はありませんが、ACI は、インフラストラクチャ レベルより、この本の次のセクションで説明したように配置がまだという事実は、非常に大きな利点を提供します。</span><span class="sxs-lookup"><span data-stu-id="a76cf-238">From those three, ACI provides a great benefit, which is the fact that you don't need to maintain the underlying OS, no need for you to upgrade/patch, etc. but ACI still is positioned in the infrastructure level, as better explained in the upcoming sections of this book.</span></span>

<span data-ttu-id="a76cf-239">レベルの PaaS (サービスとしてのプラットフォーム) に複数配置と同時に、Azure のサポートのコンテナーでは、製品は次のとおりです。</span><span class="sxs-lookup"><span data-stu-id="a76cf-239">The products in Azure supporting containers that are at the same time positioned more in the PaaS (Platform as a Service) level are:</span></span>

-   <span data-ttu-id="a76cf-240">**Azure App Service**</span><span class="sxs-lookup"><span data-stu-id="a76cf-240">**Azure App Service**</span></span>
-   <span data-ttu-id="a76cf-241">**Azure Kubernetes Service (AKS と ACS)**</span><span class="sxs-lookup"><span data-stu-id="a76cf-241">**Azure Kubernetes Service (AKS and ACS)**</span></span>
-   <span data-ttu-id="a76cf-242">**Azure Service Fabric**</span><span class="sxs-lookup"><span data-stu-id="a76cf-242">**Azure Service Fabric**</span></span> 
-   <span data-ttu-id="a76cf-243">**Azure Batch**</span><span class="sxs-lookup"><span data-stu-id="a76cf-243">**Azure Batch**</span></span> 

<span data-ttu-id="a76cf-244">次に、Azure Container Registry には、すべて、以前の製品から登録して、カスタム コンテナー イメージを展開するときに使用できる Azure でホストされている高スケーラブルなコンテナー レジストリです。</span><span class="sxs-lookup"><span data-stu-id="a76cf-244">Then, Azure Container Registry is a high scalable container registry hosted in Azure that you can use from all the previous products when registering and deploying your custom container images.</span></span>

<span data-ttu-id="a76cf-245">さらに、コンテナーから使用できる他のマネージ サービスなどの Azure SQL Database、Azure Redis cache では、Azure Cosmos DB でのように Azure でします。</span><span class="sxs-lookup"><span data-stu-id="a76cf-245">In addition, from your containers, you can consume other managed services in Azure like Azure SQL Database, Azure Redis cache, Azure Cosmos DB, etc.</span></span> <span data-ttu-id="a76cf-246">さらに、サードパーティ製のソリューション/プラットフォームでは Azure Marketplace の Cloud Foundry など OpenShift Azure 内のコンテナーも使用できます。</span><span class="sxs-lookup"><span data-stu-id="a76cf-246">plus there are third-party solutions/platforms available in Azure Marketplace like Cloud Foundry and OpenShift where you can also use containers within Azure.</span></span> 

<span data-ttu-id="a76cf-247">次のセクションでは、Windows コンテナーを対象とするときに具体的には、これらの Azure 製品とソリューションの各を使用する場合の Microsoft の推奨事項を確認できます。</span><span class="sxs-lookup"><span data-stu-id="a76cf-247">In the next sections, you can explore Microsoft's recommendations on when to use each of those Azure products and solutions specifically when targeting Windows Containers.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="a76cf-248">[前へ](what-about-cloud-native-applications.md)
>[次へ](when-not-to-deploy-to-windows-containers.md)</span><span class="sxs-lookup"><span data-stu-id="a76cf-248">[Previous](what-about-cloud-native-applications.md)
[Next](when-not-to-deploy-to-windows-containers.md)</span></span>