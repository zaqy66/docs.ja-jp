---
title: 'サーバーレス アプリ: アーキテクチャ、パターン、および Azure の実装'
description: サーバーレス アーキテクチャについて説明します。 エンタープライズ アプリケーションにサーバーレス アーキテクチャ (サービスとしてのインフラストラクチャ [IaaS] またはサービスとしてのプラットフォーム [PaaS] ではなく) を実装するタイミング、理由、その方法を説明します。
author: JEREMYLIKNESS
ms.author: jeliknes
ms.date: 6/26/2018
ms.openlocfilehash: 89e5f387e218703a2f6311ef848b3d613a9279f7
ms.sourcegitcommit: 4c158beee818c408d45a9609bfc06f209a523e22
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 07/03/2018
ms.locfileid: "37404824"
---
![](./media/Cover.jpg)

# <a name="serverless-apps-architecture-patterns-and-azure-implementation"></a>サーバーレス アプリ: アーキテクチャ、パターン、および Azure の実装

> 次の場所でダウンロードできます: <https://aka.ms/serverless-ebook>

発行者

Microsoft 開発部門、.NET および Visual Studio 製品チーム

A division of Microsoft Corporation

One Microsoft Way

Redmond, Washington 98052-6399

Copyright © 2018 by Microsoft Corporation

All rights reserved. 本書のいかなる部分も、書面による発行者の許可なしに、いかなる形式または方法によっても、複製または伝送することを禁じます。

本書は "現状有姿" で提供され、著者の見解と意見を表しています。 URL および他の参照されているインターネットの Web サイトをはじめ、本書に記載されている見解、意見、および情報は、通知なく変更されることがあります。

ここに記載したいくつかの例は、説明のためだけに提供された架空のものです。 実在のものとの関連性または関係性は一切ありません。

<https://www.microsoft.com> の "商標" Web ページに記載されている Microsoft および商標は、Microsoft グループの商標です。

Mac および macOS は Apple Inc. の商標です。

その他のすべてのマークおよびロゴは、該当する各社が所有しています。

作成者:

> **[Jeremy Likness](https://twitter.com/jeremylikness)**、シニア クラウド デベロッパー アドボケイト、APEX、Microsoft Corp.

共同作成者:

> **[Cecil Phillip](https://twitter.com/cecilphillip)**、クラウド デベロッパー アドボケイト II、APEX、Microsoft Corp.

編集者:

> **[Bill Wagner](https://twitter.com/billwagner)**、シニア コンテンツ開発者、APEX、Microsoft Corp.

> **[Maira Wenzel](https://twitter.com/mairacw)**、シニア コンテンツ開発者、APEX、Microsoft Corp.

参加者とレビュー担当者:

> **[Steve Smith](https://twitter.com/ardalis)**、所有者、Ardalis Services。

## <a name="introduction"></a>はじめに

サーバーレスとは、クラウド プラットフォームが純粋なクラウド ネイティブ コードの方向に進化したものです。 開発者は、サーバーレスにより、インフラストラクチャを心配することなく、ビジネス ロジックに近づくことができます。 "サーバーがない" というよりはむしろ "サーバーが少ない" パターンです。 サーバーレス コードは、イベント ドリブンです。 コードは、従来の HTTP Web 要求からタイマーまたはファイルのアップロード結果など、すべてのものからトリガーできます。 サーバーレスの背後にあるインフラストラクチャを瞬時にスケーリングして、需要に柔軟に対応することにより、真に "使用したものを支払う" マイクロビリングが提供されます。 サーバーレスでは、新しい考え方やアプローチでアプリケーションを構築する必要があり、すべての問題へのソリューションとしては適していません。 開発者は以下の決定をする必要があります。

* サーバーレスの長所と短所とは何か?
* 独自のアプリケーションでなぜサーバーレスを検討する必要があるのか?
* サーバーレス コードをどのようにビルド、テスト、展開するのか?
* 既存のアプリケーションでサーバーレスにコードを移行するのにどの場所が適切であるか、およびこの移行を実現する最善の方法は何か?

## <a name="about-this-guide"></a>このガイドについて

このガイドでは、サーバーレスを使用するアプリケーションをクラウド ネイティブで開発することに焦点を当てています。 このブックでは、サーバーレス アプリの開発の利点と、可能性のある欠点を明らかにし、サーバーレス アーキテクチャについて概説します。 サーバーレスの多くの使用例は、さまざまなサーバーレスの設計パターンを使用して示しています。

このガイドでは、Azure のサーバーレス プラットフォームの構成要素について説明しますが、特に [Azure Functions](https://docs.microsoft.com/azure/azure-functions/functions-overview) を使用したサーバーレス実装について説明しています。 トリガー、バインド方法、および Durable Functions を使用した状態に依存するサーバーレス アプリの実装方法について説明します。 最後に、プロジェクトにとってサーバーレスが正しいアプローチであるかどうかを判断するために、ビジネス例およびケース スタディで状況や視点を示しています。

## <a name="evolution-of-cloud-platforms"></a>クラウド プラットフォームの進化

サーバーレスとは、クラウド プラットフォームがいくつか繰り返されたものの累積です。 この進化は、データ センターの物理メタルから始まって、Infrastructure as a Service (IaaS) および Platform as a Service (PaaS) へ進化しました。

![オンプレミスからサーバーレスへの進化](./media/serverless-evolution-iaas-paas.png)

クラウド以前は、開発および運用の間には、認識可能な境界がありました。 アプリケーションを展開するということは、次のようなさまざまな問題に回答するようなものでした。

* どのようなハードウェアをインストールする必要があるか?
* コンピューターへの物理アクセスのセキュリティはどのように確保するか?
* データ センターには無停電電源装置 (UPS) は必要か?
* ストレージのバックアップはどこに送信するか?
* 冗長電源は必要か?

このような問題はこれ以外にもあり、莫大なオーバーヘッドがありました。 多くの状況では、IT 部門は途方もない無駄への対応を強いられていました。 この無駄とは、ディザスター リカバリー用のバックアップ マシンとしてのサーバーと、スケールアウトを可能にするスタンバイ サーバーを過度に配置していたことでした。幸いにも、仮想マシン (VM) を使用した仮想化テクノロジの導入 ([Hyper-V](/virtualization/hyper-v-on-windows/about/) など) で、Infrastructure as a Service (IaaS) が台頭しました。 運用側は、仮想化されたインフラストラクチャで、サーバーの標準セットを基幹として構成することが可能になり、ユニークなサーバー群を "オン デマンド" でプロビジョニングできる柔軟な環境が出来上がりました。 さらに重要なことには、クラウドを使用して仮想マシンを "サービスとして" 提供するステージが仮想化により設定されました。 企業は、冗長充電や物理マシンなどを心配する必要がなくなりました。 その代わりに仮想環境に集中できるようになりました。

運用ではまださまざまなタスクをこなす必要があるため、IaaS にはまだ大量のオーバーヘッドが必要です。 たとえば、次のようなタスクです。

* サーバーへの修正プログラムの適用とバックアップ。
* パッケージのインストール。
* オペレーティング システムの最新の状態の維持。
* アプリケーションの監視。

次の進化の Platform as a Service (PaaS) により、オーバーヘッドが減りました。 PaaS でクラウドのプロバイダーは、オペレーティング システム、セキュリティ更新プログラムに対応するのみでなく、特定のプラットフォームをサポートするのに必要なパッケージさえにも対応します。 VM を構築して .NET Framework を構成して、Internet Information Services (IIS) サーバーを立ち上げる代わりに、開発者は "Web アプリケーション" や "API エンドポイント" などの "プラットフォーム ターゲット" を選択し、コードを直接展開すればよいだけになります。 これにより、インフラストラクチャの問題は以下に減りました。

* どのようなサイズのサービスが必要か?
* サービスはどのようにスケール アウトされるのか (サーバーやノードが追加されるのか)?
* サービスはどのようにスケール アップされるのか (サーバーやノードをホストする容量が増えるのか)?

イベント ドリブンのコードに焦点を当てることにより、サーバーレスはさらにサーバーを抽象化しました。 プラットフォームの代わりに、開発者は 1 つのことを実行するマイクロサービスに集中することができます。 サーバーレス コードを構築するときに重要な 2 つの問題は次のとおりです。

* コードは何によってトリガーされるか?
* コードでは何が実行されるか?

サーバーレスでは、インフラストラクチャは抽象化されます。 開発者がホストをまったく心配する必要がない場合もあります。 IIS、Kestrel、Apache またはその他の Web サービスのインスタンスが Web 要求を処理する場合もしない場合も、開発者は HTTP トリガーに焦点を当てます。 トリガーは、要求に対して標準のクロスプラットフォームのペイロードを提供します。 このペイロードは、開発手順を単純化するのみでなく、テストを行いやすくし、場合によってはプラットフォーム間でコードを簡単に移植できるようにします。

サーバーレスのもう 1 つの特徴に、マイクロビリングがあります。 Web アプリケーションでは、一般的に Web API エンドポイントがホストされます。 従来のベア メタルでは、IaaS および PaaS の実装でさえも、API をホストするためのリソースに継続的に支払いが行われてきました。 つまり、アクセスがないときでもエンドポイントをホストする費用を支払わなければなりません。 たいてい他よりも頻繁に呼び出される API が 1 つあるため、よく使用されるエンドポイントをサポートするためにシステム全体がスケールされます。 サーバーレスでは、各エンドポイントを個別にスケーリングして、その費用のみを支払えばよいので、API が呼び出されていないときはコストは発生しません。 多くの場合、移行により、エンドポイントをサポートする継続的なコストが劇的に減ります。

## <a name="what-this-guide-doesnt-cover"></a>このガイドに含まれないもの

このガイドでは、特にアーキテクチャでのアプローチおよび設計パターンについて説明しており、Azure Functions、[Logic Apps](https://docs.microsoft.com/azure/logic-apps/logic-apps-what-are-logic-apps) またはその他のサーバーレス プラットフォームについては詳しくは説明していません。 このガイドでは、たとえば、Logic Apps が使用された高度なワークフローや、クロス オリジン リソース共有 (CORS) の構成などの Azure Functions の機能、カスタム ドメインの適用または SSL 証明書のアップロードについては説明していません。 これらについては、オンラインの [Azure Functions のドキュメント](https://docs.microsoft.com/azure/azure-functions/functions-reference)で説明しています。

### <a name="additional-resources"></a>その他の技術情報

* [Azure アーキテクチャ センター](https://docs.microsoft.com/azure/architecture/)
* [クラウド アプリケーションのベスト プラクティス](https://docs.microsoft.com/azure/architecture/best-practices/api-design)

## <a name="who-should-use-the-guide"></a>対象読者

このガイドは、オンプレミスまたはクラウドでサーバーレス コンポーネントを使用する可能性のある、.NET でのエンタープライズ アプリケーションを開発する、開発者やソリューション アーキテクト向けに記述されています。 これは、次のことに関心のある、開発者、アーキテクト、技術意思決定者に役立ちます。

* サーバーレスでの開発の長所と短所の理解
* サーバーレス アーキテクチャに着手する方法の学習
* サーバーレス アプリの実装例

## <a name="how-to-use-the-guide"></a>このガイドの使用方法

このガイドの最初の部分では、いくつかの異なるアーキテクチャでのアプローチを比較しながら、なぜサーバーレスが選択肢として選択可能か検証します。 ソフトウェア開発のすべての局面は、アーキテクチャの決定の影響を受けるので、ライフサイクルの技術面および開発面の両方を検証しています。 次に、このガイドでは、ユース ケースと設計パターンを検証しています。これには、Azure Functions を使用した参照用の実装も含まれています。 各セクションには、特定の領域についてさらに学習するための参照資料が含まれています。 このガイドは、チュートリアル用のリソースおよびサーバーレス実装の実践の探査で締めくくられています。

## <a name="send-your-feedback"></a>フィードバックの送信

このガイドおよび関連サンプルは、継続的に更新されるので、お客様のフィードバックを歓迎しています。 このガイドを改善する方法についてコメントがある場合、[GitHub の問題](https://github.com/dotnet/docs/issues)の任意のページの下部にビルドされているフィードバック セクションをご利用ください。

>[!div class="step-by-step"]
[次へ](architecture-approaches.md)