---
title: WCF Discovery オブジェクト モデル
ms.date: 03/30/2017
ms.assetid: 8365a152-eacd-4779-9130-bbc48fa5c5d9
ms.openlocfilehash: b337eda40fc70a6d0e7b3aeccfc125e6e6bacf8f
ms.sourcegitcommit: 213292dfbb0c37d83f62709959ff55c50af5560d
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 09/25/2018
ms.locfileid: "47070878"
---
# <a name="wcf-discovery-object-model"></a><span data-ttu-id="f5ee8-102">WCF Discovery オブジェクト モデル</span><span class="sxs-lookup"><span data-stu-id="f5ee8-102">WCF Discovery Object Model</span></span>
<span data-ttu-id="f5ee8-103">WCF Discovery は、実行時に探索可能なサービスと、これらのサービスを検索して使用するクライアントの作成を可能にする統合プログラミング モデルを提供する型のセットで構成されています。</span><span class="sxs-lookup"><span data-stu-id="f5ee8-103">WCF Discovery consists of a set of types that provide a unified programming model that allows you to write services that are discoverable at runtime and clients that find and use these services.</span></span>  
  
## <a name="making-a-service-discoverable-and-finding-services"></a><span data-ttu-id="f5ee8-104">探索可能なサービスの作成とサービスの検索</span><span class="sxs-lookup"><span data-stu-id="f5ee8-104">Making a Service Discoverable and Finding Services</span></span>  
 <span data-ttu-id="f5ee8-105">WCF サービスを探索可能にするには、<xref:System.ServiceModel.Discovery.ServiceDiscoveryBehavior> をサービス ホストの <xref:System.ServiceModel.Description.ServiceDescription> に追加し、探索エンドポイントを追加します。</span><span class="sxs-lookup"><span data-stu-id="f5ee8-105">To make a WCF service discoverable, add a <xref:System.ServiceModel.Discovery.ServiceDiscoveryBehavior> to the <xref:System.ServiceModel.Description.ServiceDescription> of the service host and add a discovery endpoint.</span></span> <span data-ttu-id="f5ee8-106">サービスがアナウンス メッセージを送信するように構成されている (<xref:System.ServiceModel.Discovery.AnnouncementEndpoint> を追加して) 場合は、サービス ホストが開かれるとき、および閉じられるときにアナウンスが送信されます。</span><span class="sxs-lookup"><span data-stu-id="f5ee8-106">If a service is configured to send announcement messages (by adding an <xref:System.ServiceModel.Discovery.AnnouncementEndpoint>) the announcement is sent when the service host is opened and closed.</span></span>  
  
 <span data-ttu-id="f5ee8-107">サービスのアナウンス メッセージをリッスンするクライアントは、アナウンス サービスをホストし、1 つ以上のアナウンス エンドポイントを追加します。</span><span class="sxs-lookup"><span data-stu-id="f5ee8-107">A client that wants to listen for service announcement messages hosts an announcement service and adds one or more announcement endpoints.</span></span> <span data-ttu-id="f5ee8-108">アナウンス サービスは、アナウンス メッセージを受信し、アナウンス イベントを発生させます。</span><span class="sxs-lookup"><span data-stu-id="f5ee8-108">The announcement service receives announcement messages and raises announcement events.</span></span>  
  
 <span data-ttu-id="f5ee8-109">クライアントは、<xref:System.ServiceModel.Discovery.DiscoveryClient> クラスを使用して、利用可能なサービスを検索します。</span><span class="sxs-lookup"><span data-stu-id="f5ee8-109">A client uses the <xref:System.ServiceModel.Discovery.DiscoveryClient> class to search for available services.</span></span> <span data-ttu-id="f5ee8-110">クライアント アプリケーションは <xref:System.ServiceModel.Discovery.DiscoveryClient> クラスをインスタンス化し、探索メッセージの送信元を指定する探索エンドポイントを渡します。</span><span class="sxs-lookup"><span data-stu-id="f5ee8-110">The client application instantiates the <xref:System.ServiceModel.Discovery.DiscoveryClient> class, passing in a discovery endpoint that specifies where to send discovery messages.</span></span> <span data-ttu-id="f5ee8-111">クライアントは <xref:System.ServiceModel.Discovery.DiscoveryClient.Find%2A> メソッドを呼び出し、`Probe` 要求を送ります。</span><span class="sxs-lookup"><span data-stu-id="f5ee8-111">The client calls the <xref:System.ServiceModel.Discovery.DiscoveryClient.Find%2A> method, which sends a `Probe` request.</span></span> <span data-ttu-id="f5ee8-112">探索メッセージをリッスンしているサービスが、この `Probe` 要求を受信します。</span><span class="sxs-lookup"><span data-stu-id="f5ee8-112">Services listening for discovery messages receive this `Probe` request.</span></span> <span data-ttu-id="f5ee8-113">サービスが `Probe` に指定されている条件に一致している場合は、`ProbeMatch` メッセージがクライアントに返されます。</span><span class="sxs-lookup"><span data-stu-id="f5ee8-113">If the service matches the criteria specified in the `Probe`, it sends a `ProbeMatch` message back to the client.</span></span>  
  
## <a name="object-model"></a><span data-ttu-id="f5ee8-114">オブジェクト モデル</span><span class="sxs-lookup"><span data-stu-id="f5ee8-114">Object Model</span></span>  
 <span data-ttu-id="f5ee8-115">WCF Discovery API は、次のクラスを定義します。</span><span class="sxs-lookup"><span data-stu-id="f5ee8-115">The WCF Discovery API defines the following classes:</span></span>  
  
-   <xref:System.ServiceModel.Discovery.AnnouncementClient>  
  
-   <xref:System.ServiceModel.Discovery.AnnouncementEndpoint>  
  
-   <xref:System.ServiceModel.Discovery.AnnouncementService>  
  
-   <xref:System.ServiceModel.Discovery.DiscoveryClient>  
  
-   <xref:System.ServiceModel.Discovery.DiscoveryEndpoint>  
  
-   <xref:System.ServiceModel.Discovery.DiscoveryClientBindingElement>  
  
-   <xref:System.ServiceModel.Discovery.DiscoveryMessageSequenceGenerator>  
  
-   <xref:System.ServiceModel.Discovery.ServiceDiscoveryMode>  
  
-   <xref:System.ServiceModel.Discovery.DiscoveryProxy>  
  
-   <xref:System.ServiceModel.Discovery.DiscoveryService>  
  
-   <xref:System.ServiceModel.Discovery.DiscoveryVersion>  
  
-   <xref:System.ServiceModel.Discovery.DynamicEndpoint>  
  
-   <xref:System.ServiceModel.Discovery.EndpointDiscoveryBehavior>  
  
-   <xref:System.ServiceModel.Discovery.EndpointDiscoveryMetadata>  
  
-   <xref:System.ServiceModel.Discovery.FindCriteria>  
  
-   <xref:System.ServiceModel.Discovery.FindRequestContext>  
  
-   <xref:System.ServiceModel.Discovery.FindResponse>  
  
-   <xref:System.ServiceModel.Discovery.ResolveCriteria>  
  
-   <xref:System.ServiceModel.Discovery.ResolveResponse>  
  
-   <xref:System.ServiceModel.Discovery.ServiceDiscoveryBehavior>  
 
-   <xref:System.ServiceModel.Discovery.UdpAnnouncementEndpoint>  
  
-   <xref:System.ServiceModel.Discovery.UdpDiscoveryEndpoint>  
  
## <a name="announcementclient"></a><span data-ttu-id="f5ee8-116">AnnouncementClient</span><span class="sxs-lookup"><span data-stu-id="f5ee8-116">AnnouncementClient</span></span>  
 <span data-ttu-id="f5ee8-117"><xref:System.ServiceModel.Discovery.AnnouncementClient> クラスは、アナウンス メッセージを送信するための同期メソッドと非同期メソッドを提供します。</span><span class="sxs-lookup"><span data-stu-id="f5ee8-117">The <xref:System.ServiceModel.Discovery.AnnouncementClient> class provides synchronous and asynchronous methods for sending announcement messages.</span></span> <span data-ttu-id="f5ee8-118">アナウンス メッセージには Hello と Bye の 2 種類があります。</span><span class="sxs-lookup"><span data-stu-id="f5ee8-118">There are two types of announcement messages, Hello and Bye.</span></span> <span data-ttu-id="f5ee8-119">Hello メッセージは、サービスが使用可能になったことを示すために送信され、Bye メッセージは、既存のサービスが使用不可になったことを示すために送信されます。</span><span class="sxs-lookup"><span data-stu-id="f5ee8-119">A Hello message is sent to indicate that a service has become available and a Bye message is sent to indicate that an existing service has become unavailable.</span></span> <span data-ttu-id="f5ee8-120">開発者は、<xref:System.ServiceModel.Discovery.AnnouncementClient> インスタンスを作成して、<xref:System.ServiceModel.Discovery.AnnouncementEndpoint> のインスタンスをコンストラクター パラメーターとして渡します。</span><span class="sxs-lookup"><span data-stu-id="f5ee8-120">The developer creates an <xref:System.ServiceModel.Discovery.AnnouncementClient> instance, passing an instance of <xref:System.ServiceModel.Discovery.AnnouncementEndpoint> as a constructor parameter.</span></span>  
  
## <a name="announcementendpoint"></a><span data-ttu-id="f5ee8-121">AnnouncementEndpoint</span><span class="sxs-lookup"><span data-stu-id="f5ee8-121">AnnouncementEndpoint</span></span>  
 <span data-ttu-id="f5ee8-122"><xref:System.ServiceModel.Discovery.AnnouncementEndpoint> は、固定アナウンス コントラクトが設定されている標準エンドポイントを表します。</span><span class="sxs-lookup"><span data-stu-id="f5ee8-122"><xref:System.ServiceModel.Discovery.AnnouncementEndpoint> represents a standard endpoint with a fixed announcement contract.</span></span> <span data-ttu-id="f5ee8-123">サービスまたはクライアントは、これを使用して、アナウンス メッセージの送受信を行います。</span><span class="sxs-lookup"><span data-stu-id="f5ee8-123">It is used by a service or client to send and receive announcement messages.</span></span> <span data-ttu-id="f5ee8-124">既定では、<xref:System.ServiceModel.Discovery.AnnouncementEndpoint> クラスは、WS_Discovery 11 プロトコル バージョンを使用するように設定されています。</span><span class="sxs-lookup"><span data-stu-id="f5ee8-124">By default, the <xref:System.ServiceModel.Discovery.AnnouncementEndpoint> class is set to use the WS_Discovery 11 protocol version.</span></span>  
  
## <a name="announcementservice"></a><span data-ttu-id="f5ee8-125">AnnouncementService</span><span class="sxs-lookup"><span data-stu-id="f5ee8-125">AnnouncementService</span></span>  
 <span data-ttu-id="f5ee8-126"><xref:System.ServiceModel.Discovery.AnnouncementService> は、アナウンス メッセージを受信して処理するアナウンス サービスの実装で、システムによって提供されています。</span><span class="sxs-lookup"><span data-stu-id="f5ee8-126"><xref:System.ServiceModel.Discovery.AnnouncementService> is a system-provided implementation of an announcement service that receives and processes announcement messages.</span></span> <span data-ttu-id="f5ee8-127">Hello または Bye メッセージが受信されると、<xref:System.ServiceModel.Discovery.AnnouncementService> のインスタンスが、適切な仮想メソッド <xref:System.ServiceModel.Discovery.AnnouncementService.OnBeginOnlineAnnouncement%2A> または <xref:System.ServiceModel.Discovery.AnnouncementService.OnBeginOfflineAnnouncement%2A> を呼び出し、アナウンス イベントを発生させます。</span><span class="sxs-lookup"><span data-stu-id="f5ee8-127">When a Hello or Bye message is received, the <xref:System.ServiceModel.Discovery.AnnouncementService> instance calls the appropriate virtual method <xref:System.ServiceModel.Discovery.AnnouncementService.OnBeginOnlineAnnouncement%2A> or <xref:System.ServiceModel.Discovery.AnnouncementService.OnBeginOfflineAnnouncement%2A>, which raises announcement events.</span></span>  
  
## <a name="discoveryclient"></a><span data-ttu-id="f5ee8-128">DiscoveryClient</span><span class="sxs-lookup"><span data-stu-id="f5ee8-128">DiscoveryClient</span></span>  
 <span data-ttu-id="f5ee8-129"><xref:System.ServiceModel.Discovery.DiscoveryClient> クラスは、使用可能なサービスを検索および解決するために、クライアント アプリケーションによって使用されます。</span><span class="sxs-lookup"><span data-stu-id="f5ee8-129">The <xref:System.ServiceModel.Discovery.DiscoveryClient> class is used by a client application to find and resolve available services.</span></span> <span data-ttu-id="f5ee8-130">指定されている <xref:System.ServiceModel.Discovery.FindCriteria> を基にサービスを検索し、<xref:System.ServiceModel.Discovery.ResolveCriteria> を基にサービスを解決するための同期メソッドと非同期メソッドを提供します。</span><span class="sxs-lookup"><span data-stu-id="f5ee8-130">It provides synchronous and asynchronous methods for finding and resolving services based on the specified <xref:System.ServiceModel.Discovery.FindCriteria> and <xref:System.ServiceModel.Discovery.ResolveCriteria> respectively.</span></span> <span data-ttu-id="f5ee8-131">開発者は、<xref:System.ServiceModel.Discovery.DiscoveryClient> インスタンスを作成して、<xref:System.ServiceModel.Discovery.DiscoveryEndpoint> のインスタンスをコンストラクター パラメーターとして提供します。</span><span class="sxs-lookup"><span data-stu-id="f5ee8-131">The developer creates a <xref:System.ServiceModel.Discovery.DiscoveryClient> instance and provides an instance of <xref:System.ServiceModel.Discovery.DiscoveryEndpoint> as a constructor parameter.</span></span>  
  
 <span data-ttu-id="f5ee8-132">サービスを検索するには、同期または非同期の `Find` メソッドを呼び出し、使用する検索条件が設定された <xref:System.ServiceModel.Discovery.FindCriteria> インスタンスを提供します。</span><span class="sxs-lookup"><span data-stu-id="f5ee8-132">To find a service, the developer invokes the synchronous or asynchronous `Find` method, which provides a <xref:System.ServiceModel.Discovery.FindCriteria> instance that contains the search criteria to use.</span></span> <span data-ttu-id="f5ee8-133"><xref:System.ServiceModel.Discovery.DiscoveryClient> は、適切なヘッダーを設定して `Probe` メッセージを作成し、検索要求を送信します。</span><span class="sxs-lookup"><span data-stu-id="f5ee8-133">The <xref:System.ServiceModel.Discovery.DiscoveryClient> creates a `Probe` message with the appropriate headers, and sends the find request.</span></span> <span data-ttu-id="f5ee8-134">どの時点でも、未処理の `Find` 要求が 1 つ以上存在する可能性があるため、クライアントは、受信した応答を関連付けて、応答を検証します。</span><span class="sxs-lookup"><span data-stu-id="f5ee8-134">Because there can be more than one outstanding `Find` request at any time, the client correlates the received responses and validates the response.</span></span> <span data-ttu-id="f5ee8-135">その後、`Find` を使用して、結果を <xref:System.ServiceModel.Discovery.FindResponse> 操作の呼び出し元に渡します。</span><span class="sxs-lookup"><span data-stu-id="f5ee8-135">It then delivers the results to the caller of the `Find` operation using <xref:System.ServiceModel.Discovery.FindResponse>.</span></span>  
  
 <span data-ttu-id="f5ee8-136">既知のサービスを解決するには、既知のサービスの `Resolve` が設定された <xref:System.ServiceModel.Discovery.ResolveCriteria> のインスタンスを提供する同期または非同期の <xref:System.ServiceModel.EndpointAddress> メソッドを呼び出します。</span><span class="sxs-lookup"><span data-stu-id="f5ee8-136">To resolve a known service, the developer invokes the synchronous or asynchronous `Resolve` method that provides an instance of <xref:System.ServiceModel.Discovery.ResolveCriteria> that contains the <xref:System.ServiceModel.EndpointAddress> of the known service.</span></span> <span data-ttu-id="f5ee8-137"><xref:System.ServiceModel.Discovery.DiscoveryClient> は、適切なヘッダーを設定して `Resolve` メッセージを作成し、解決要求を送信します。</span><span class="sxs-lookup"><span data-stu-id="f5ee8-137">The <xref:System.ServiceModel.Discovery.DiscoveryClient> creates the `Resolve` message with the appropriate headers and sends the resolve request.</span></span> <span data-ttu-id="f5ee8-138">受信された応答が未処理の解決要求と関連付けられ、その結果が、`Resolve` を使用して、<xref:System.ServiceModel.Discovery.ResolveResponse> 操作の呼び出し元に渡されます。</span><span class="sxs-lookup"><span data-stu-id="f5ee8-138">The received response is correlated against the outstanding resolve requests and the result is delivered to the caller of the `Resolve` operation using <xref:System.ServiceModel.Discovery.ResolveResponse>.</span></span>  
  
 <span data-ttu-id="f5ee8-139">ネットワークに探索プロキシが存在し、<xref:System.ServiceModel.Discovery.DiscoveryClient> がマルチキャストで探索要求を送信する場合、探索プロキシは、マルチキャスト抑制 Hello メッセージを使用して応答できます。</span><span class="sxs-lookup"><span data-stu-id="f5ee8-139">If a discovery proxy is present on the network and the <xref:System.ServiceModel.Discovery.DiscoveryClient> sends the discovery request in a multicast fashion, the discovery proxy can respond with the multicast suppression Hello message.</span></span> <span data-ttu-id="f5ee8-140"><xref:System.ServiceModel.Discovery.DiscoveryClient> は、未処理の `ProxyAvailable` 要求または `Find` 要求に対する Hello 応答を受信すると、`Resolve` イベントを発生させます。</span><span class="sxs-lookup"><span data-stu-id="f5ee8-140">The <xref:System.ServiceModel.Discovery.DiscoveryClient> raises the `ProxyAvailable` event when it receives Hello messages in response to outstanding `Find` or `Resolve` requests.</span></span> <span data-ttu-id="f5ee8-141">`ProxyAvailable` イベントには、探索プロキシについての <xref:System.ServiceModel.Discovery.EndpointDiscoveryMetadata> が含まれています。</span><span class="sxs-lookup"><span data-stu-id="f5ee8-141">The `ProxyAvailable` event contains the <xref:System.ServiceModel.Discovery.EndpointDiscoveryMetadata> about the discovery proxy.</span></span> <span data-ttu-id="f5ee8-142">管理者は、この情報を使用して、アドホック モードからマネージド モードに切り替えるかどうかを制御できます。</span><span class="sxs-lookup"><span data-stu-id="f5ee8-142">It is up to the developer to use this information to switch from Ad hoc to Managed mode.</span></span>  
  
## <a name="discoveryendpoint"></a><span data-ttu-id="f5ee8-143">DiscoveryEndpoint</span><span class="sxs-lookup"><span data-stu-id="f5ee8-143">DiscoveryEndpoint</span></span>  
 <span data-ttu-id="f5ee8-144"><xref:System.ServiceModel.Discovery.DiscoveryEndpoint> は、固定探索コントラクトが設定されている標準エンドポイントを表します。</span><span class="sxs-lookup"><span data-stu-id="f5ee8-144"><xref:System.ServiceModel.Discovery.DiscoveryEndpoint> represents a standard endpoint with a fixed discovery contract.</span></span> <span data-ttu-id="f5ee8-145">サービスまたはクライアントによる探索メッセージの送受信に使用されます。</span><span class="sxs-lookup"><span data-stu-id="f5ee8-145">It is used by a service or client to send or receive discovery messages.</span></span> <span data-ttu-id="f5ee8-146">既定では、<xref:System.ServiceModel.Discovery.DiscoveryEndpoint> が、<xref:System.ServiceModel.Discovery.ServiceDiscoveryMode.Managed?displayProperty=nameWithType> モードと WSDiscovery11 WS-Discovery バージョンを使用するように設定されています。</span><span class="sxs-lookup"><span data-stu-id="f5ee8-146">By default, <xref:System.ServiceModel.Discovery.DiscoveryEndpoint> is set to use <xref:System.ServiceModel.Discovery.ServiceDiscoveryMode.Managed?displayProperty=nameWithType> mode and the WSDiscovery11 WS-Discovery version.</span></span>  
  
## <a name="discoverymessagesequencegenerator"></a><span data-ttu-id="f5ee8-147">DiscoveryMessageSequenceGenerator</span><span class="sxs-lookup"><span data-stu-id="f5ee8-147">DiscoveryMessageSequenceGenerator</span></span>  
 <span data-ttu-id="f5ee8-148"><xref:System.ServiceModel.Discovery.DiscoveryMessageSequenceGenerator> は、サービスが探索メッセージまたはアナウンス メッセージを送信するときに、<xref:System.ServiceModel.Discovery.DiscoveryMessageSequence> を生成するために使用されます。</span><span class="sxs-lookup"><span data-stu-id="f5ee8-148"><xref:System.ServiceModel.Discovery.DiscoveryMessageSequenceGenerator> is used to generate a <xref:System.ServiceModel.Discovery.DiscoveryMessageSequence> when the service is sending out Discovery or Announcement messages.</span></span>  
  
## <a name="discoveryservice"></a><span data-ttu-id="f5ee8-149">DiscoveryService</span><span class="sxs-lookup"><span data-stu-id="f5ee8-149">DiscoveryService</span></span>  
 <span data-ttu-id="f5ee8-150"><xref:System.ServiceModel.Discovery.DiscoveryService> 抽象クラスは、`Probe` メッセージおよび `Resolve` メッセージの受信と処理のフレームワークを提供します。</span><span class="sxs-lookup"><span data-stu-id="f5ee8-150">The <xref:System.ServiceModel.Discovery.DiscoveryService> abstract class provides a framework for receiving and processing `Probe` and `Resolve` messages.</span></span> <span data-ttu-id="f5ee8-151">`Probe` メッセージが受信されると、<xref:System.ServiceModel.Discovery.DiscoveryService> は、受信メッセージに基づいて <xref:System.ServiceModel.Discovery.FindRequestContext> のインスタンスを作成し、<xref:System.ServiceModel.Discovery.DiscoveryService.OnBeginFind%2A> 仮想メソッドを呼び出します。</span><span class="sxs-lookup"><span data-stu-id="f5ee8-151">When a `Probe` message is received, <xref:System.ServiceModel.Discovery.DiscoveryService> creates an instance of <xref:System.ServiceModel.Discovery.FindRequestContext> based on the incoming message and invokes the <xref:System.ServiceModel.Discovery.DiscoveryService.OnBeginFind%2A> virtual method.</span></span> <span data-ttu-id="f5ee8-152">`Resolve` メッセージが受信されると、<xref:System.ServiceModel.Discovery.DiscoveryService> は <xref:System.ServiceModel.Discovery.DiscoveryService.OnBeginResolve%2A> 仮想メソッドを呼び出します。</span><span class="sxs-lookup"><span data-stu-id="f5ee8-152">When a `Resolve` message is received, <xref:System.ServiceModel.Discovery.DiscoveryService> invokes the <xref:System.ServiceModel.Discovery.DiscoveryService.OnBeginResolve%2A> virtual method.</span></span> <span data-ttu-id="f5ee8-153">このクラスから継承して、カスタムの探索サービス実装を提供できます。</span><span class="sxs-lookup"><span data-stu-id="f5ee8-153">You can inherit from this class to provide a custom Discovery Service implementation.</span></span>  
  
## <a name="discoveryproxy"></a><span data-ttu-id="f5ee8-154">DiscoveryProxy</span><span class="sxs-lookup"><span data-stu-id="f5ee8-154">DiscoveryProxy</span></span>  
 <span data-ttu-id="f5ee8-155"><xref:System.ServiceModel.Discovery.DiscoveryProxy> 抽象クラスは、探索メッセージおよびアナウンス メッセージの受信と処理のフレームワークを提供します。</span><span class="sxs-lookup"><span data-stu-id="f5ee8-155">The <xref:System.ServiceModel.Discovery.DiscoveryProxy> abstract class provides a framework for receiving and processing discovery and announcement messages.</span></span> <span data-ttu-id="f5ee8-156">カスタムの探索プロキシを実装するときは、このクラスを継承します。</span><span class="sxs-lookup"><span data-stu-id="f5ee8-156">You inherit from this class when you are implementing a custom discovery proxy.</span></span> <span data-ttu-id="f5ee8-157">`Probe` メッセージがマルチキャストで受信されると、<xref:System.ServiceModel.Discovery.DiscoveryProxy> クラスは `BeginShouldRedirectFind` 仮想メソッドを呼び出して、マルチキャスト抑制メッセージの送信が必要かどうかを決定します。</span><span class="sxs-lookup"><span data-stu-id="f5ee8-157">When a `Probe` message is received over multicast, the <xref:System.ServiceModel.Discovery.DiscoveryProxy> class calls the `BeginShouldRedirectFind` virtual method to determine whether a multicast suppression message should to be sent.</span></span> <span data-ttu-id="f5ee8-158">開発者の判断により、マルチキャスト抑制メッセージを送信しない場合、または、`Probe` メッセージがユニキャストで受信された場合は、受信メッセージに基づいて <xref:System.ServiceModel.Discovery.FindRequestContext> クラスのインスタンスを作成し、`OnBeginFind` 仮想メソッドを呼び出します。</span><span class="sxs-lookup"><span data-stu-id="f5ee8-158">If the developer decides not to send a multicast suppression message or if the `Probe` message was received over unicast, it creates an instance of the <xref:System.ServiceModel.Discovery.FindRequestContext> class based on the incoming message and invokes the `OnBeginFind` virtual method.</span></span> <span data-ttu-id="f5ee8-159">`Resolve` メッセージがマルチキャストで受信されると、<xref:System.ServiceModel.Discovery.DiscoveryProxy> クラスは `ShouldRedirectResolve` 仮想メソッドを呼び出して、マルチキャスト抑制メッセージの送信が必要かどうかを決定します。</span><span class="sxs-lookup"><span data-stu-id="f5ee8-159">When a `Resolve` message is received over multicast, The <xref:System.ServiceModel.Discovery.DiscoveryProxy> class calls the `ShouldRedirectResolve` virtual method to determine whether a multicast suppression message should to be sent.</span></span> <span data-ttu-id="f5ee8-160">開発者の判断により、マルチキャスト抑制メッセージを送信しない場合、または、`Resolve` メッセージがユニキャストで受信された場合は、受信メッセージに基づいて <xref:System.ServiceModel.Discovery.ResolveCriteria> クラスのインスタンスを作成し、`OnBeginResolve` 仮想メソッドを呼び出します。</span><span class="sxs-lookup"><span data-stu-id="f5ee8-160">If the developer decides not to send a multicast suppression message or if the `Resolve` message was received over unicast, it creates an instance of the <xref:System.ServiceModel.Discovery.ResolveCriteria> class based on the incoming message and invokes the `OnBeginResolve` virtual method.</span></span> <span data-ttu-id="f5ee8-161">Hello または Bye メッセージが受信されると、<xref:System.ServiceModel.Discovery.DiscoveryProxy> のインスタンスが、適切な仮想メソッド (`OnBeginOnlineAnnouncement` または `OnBeingOfflineAnnouncement`) を呼び出し、アナウンス イベントを発生させます。</span><span class="sxs-lookup"><span data-stu-id="f5ee8-161">When a Hello or Bye message is received, <xref:System.ServiceModel.Discovery.DiscoveryProxy> calls the appropriate virtual method (`OnBeginOnlineAnnouncement` or `OnBeingOfflineAnnouncement`), which raises announcement events.</span></span>  
  
## <a name="discoveryversion"></a><span data-ttu-id="f5ee8-162">DiscoveryVersion</span><span class="sxs-lookup"><span data-stu-id="f5ee8-162">DiscoveryVersion</span></span>  
 <span data-ttu-id="f5ee8-163"><xref:System.ServiceModel.Discovery.DiscoveryVersion> クラスは、使用する探索プロトコルのバージョンを表します。</span><span class="sxs-lookup"><span data-stu-id="f5ee8-163">The <xref:System.ServiceModel.Discovery.DiscoveryVersion> class represents the discovery protocol version to use.</span></span>  
  
## <a name="endpointdiscoverybehavior"></a><span data-ttu-id="f5ee8-164">EndpointDiscoveryBehavior</span><span class="sxs-lookup"><span data-stu-id="f5ee8-164">EndpointDiscoveryBehavior</span></span>  
 <span data-ttu-id="f5ee8-165"><xref:System.ServiceModel.Discovery.EndpointDiscoveryBehavior> クラスは、エンドポイントを探索可能にするかどうかの制御と、拡張機能、追加のコントラクト型の名前、</span><span class="sxs-lookup"><span data-stu-id="f5ee8-165">The <xref:System.ServiceModel.Discovery.EndpointDiscoveryBehavior> class is used to control the discoverability of an endpoint, specify the extensions, additional contract type names.</span></span> <span data-ttu-id="f5ee8-166">およびそのエンドポイントに関連付けるスコープの指定に使用されます。</span><span class="sxs-lookup"><span data-stu-id="f5ee8-166">and the scopes associated with that endpoint.</span></span> <span data-ttu-id="f5ee8-167">この動作は、アプリケーション エンドポイントに追加されて、そのエンドポイントの <xref:System.ServiceModel.Discovery.EndpointDiscoveryMetadata> を構成します。</span><span class="sxs-lookup"><span data-stu-id="f5ee8-167">This behavior is added to an application endpoint to configure its <xref:System.ServiceModel.Discovery.EndpointDiscoveryMetadata>.</span></span> <span data-ttu-id="f5ee8-168"><xref:System.ServiceModel.Discovery.ServiceDiscoveryBehavior> がサービス ホストに追加されると、既定では、そのサービス ホストがホストしているすべてのアプリケーション エンドポイントが探索可能になります。</span><span class="sxs-lookup"><span data-stu-id="f5ee8-168">When <xref:System.ServiceModel.Discovery.ServiceDiscoveryBehavior> is added to the service host, all the application endpoints hosted by the service host by default become discoverable.</span></span> <span data-ttu-id="f5ee8-169"><xref:System.ServiceModel.Discovery.EndpointDiscoveryBehavior.Enabled%2A> プロパティを `false` に設定すると、特定のエンドポイントの探索を無効化できます。</span><span class="sxs-lookup"><span data-stu-id="f5ee8-169">The developer can turn off discovery for a specific endpoint by setting the <xref:System.ServiceModel.Discovery.EndpointDiscoveryBehavior.Enabled%2A> property to `false`.</span></span>  
  
## <a name="endpointdiscoverymetadata"></a><span data-ttu-id="f5ee8-170">EndpointDiscoveryMetadata</span><span class="sxs-lookup"><span data-stu-id="f5ee8-170">EndpointDiscoveryMetadata</span></span>  
 <span data-ttu-id="f5ee8-171"><xref:System.ServiceModel.Discovery.EndpointDiscoveryMetadata> クラスは、サービスによって公開されるエンドポイントのバージョンに依存しない表現を提供します。</span><span class="sxs-lookup"><span data-stu-id="f5ee8-171">The <xref:System.ServiceModel.Discovery.EndpointDiscoveryMetadata> class provides a version-independent representation of an endpoint published by the service.</span></span> <span data-ttu-id="f5ee8-172">これには、サービスの開発者によって指定されたエンドポイントのアドレス、リッスン URI、コントラクト型名、スコープ、メタデータのバージョン、および拡張機能が含まれます。</span><span class="sxs-lookup"><span data-stu-id="f5ee8-172">It contains endpoint addresses, listen URIs, contract type names, scopes, metadata version and extensions specified by the service developer.</span></span> <span data-ttu-id="f5ee8-173"><xref:System.ServiceModel.Discovery.FindCriteria> は、`Probe` 操作と <xref:System.ServiceModel.Discovery.EndpointDiscoveryMetadata> との照合中に、クライアントによって送信されます。</span><span class="sxs-lookup"><span data-stu-id="f5ee8-173">The <xref:System.ServiceModel.Discovery.FindCriteria> sent by the client during a `Probe` operation is matched against the <xref:System.ServiceModel.Discovery.EndpointDiscoveryMetadata>.</span></span> <span data-ttu-id="f5ee8-174">基準が一致した場合は、<xref:System.ServiceModel.Discovery.EndpointDiscoveryMetadata> がクライアントに返されます。</span><span class="sxs-lookup"><span data-stu-id="f5ee8-174">If the criteria matches, then the <xref:System.ServiceModel.Discovery.EndpointDiscoveryMetadata> is returned to the client.</span></span> <span data-ttu-id="f5ee8-175"><xref:System.ServiceModel.Discovery.ResolveCriteria> 内のエンドポイント アドレスが、<xref:System.ServiceModel.Discovery.EndpointDiscoveryMetadata> のエンドポイント アドレスと照合されます。</span><span class="sxs-lookup"><span data-stu-id="f5ee8-175">The endpoint address in <xref:System.ServiceModel.Discovery.ResolveCriteria> is matched against the endpoint address of <xref:System.ServiceModel.Discovery.EndpointDiscoveryMetadata>.</span></span> <span data-ttu-id="f5ee8-176">基準が一致した場合は、<xref:System.ServiceModel.Discovery.EndpointDiscoveryMetadata> がクライアントに返されます。</span><span class="sxs-lookup"><span data-stu-id="f5ee8-176">If the criteria matches, then the <xref:System.ServiceModel.Discovery.EndpointDiscoveryMetadata> is returned to the client.</span></span>  
  
## <a name="findcriteria"></a><span data-ttu-id="f5ee8-177">FindCriteria</span><span class="sxs-lookup"><span data-stu-id="f5ee8-177">FindCriteria</span></span>  
 <span data-ttu-id="f5ee8-178"><xref:System.ServiceModel.Discovery.FindCriteria> クラスは、サービスの検索時に使用される条件の指定に使用するバージョンに依存しないクラスです。</span><span class="sxs-lookup"><span data-stu-id="f5ee8-178">The <xref:System.ServiceModel.Discovery.FindCriteria> class is a version-independent class used to specify the criteria used when finding a service.</span></span> <span data-ttu-id="f5ee8-179">サービスを照合するための WS-Discovery 定義の条件を完全にサポートします。</span><span class="sxs-lookup"><span data-stu-id="f5ee8-179">It fully supports the WS-Discovery-defined criteria for matching services.</span></span> <span data-ttu-id="f5ee8-180">また、このクラスには、照合プロセス中に使用できるカスタム値を指定するために開発者が使用できる拡張機能もあります。</span><span class="sxs-lookup"><span data-stu-id="f5ee8-180">It also has extensions that developers can use to specify custom values that can be used during the matching process.</span></span> <span data-ttu-id="f5ee8-181">開発者は、開発者が検索するサービスの合計数を指定する `Find`、またはクライアントが応答を待機する時間を指定する値である <xref:System.ServiceModel.Discovery.FindCriteria.MaxResults%2A> を指定して、<xref:System.ServiceModel.Discovery.FindCriteria.Duration%2A> 操作の終了条件を設定できます。</span><span class="sxs-lookup"><span data-stu-id="f5ee8-181">The developer can provide the termination criteria for the `Find` operation by specifying the <xref:System.ServiceModel.Discovery.FindCriteria.MaxResults%2A>, which specifies the total number of services the developer is looking for or that specifies the <xref:System.ServiceModel.Discovery.FindCriteria.Duration%2A>, which is the value that specifies how long the client waits for responses.</span></span>  
  
## <a name="findrequestcontext"></a><span data-ttu-id="f5ee8-182">FindRequestContext</span><span class="sxs-lookup"><span data-stu-id="f5ee8-182">FindRequestContext</span></span>  
 <span data-ttu-id="f5ee8-183"><xref:System.ServiceModel.Discovery.FindRequestContext> クラスは、クライアントが `Probe` 操作を開始するときに受信する `Find` メッセージに基づいて、探索サービスによってインスタンス化されます。</span><span class="sxs-lookup"><span data-stu-id="f5ee8-183">The <xref:System.ServiceModel.Discovery.FindRequestContext> class is instantiated by the discovery service based on the `Probe` message it receives when a client initiates a `Find` operation.</span></span> <span data-ttu-id="f5ee8-184">これには、クライアントによって指定された <xref:System.ServiceModel.Discovery.FindCriteria> のインスタンスが含まれます。</span><span class="sxs-lookup"><span data-stu-id="f5ee8-184">It contains an instance of <xref:System.ServiceModel.Discovery.FindCriteria> that was specified by the client.</span></span>  
  
## <a name="findresponse"></a><span data-ttu-id="f5ee8-185">FindResponse</span><span class="sxs-lookup"><span data-stu-id="f5ee8-185">FindResponse</span></span>  
 <span data-ttu-id="f5ee8-186"><xref:System.ServiceModel.Discovery.FindResponse> クラスは、<xref:System.ServiceModel.Discovery.DiscoveryClient.Find%2A> 操作の応答と共に、`Find` の呼び出し元に返されます。</span><span class="sxs-lookup"><span data-stu-id="f5ee8-186">The <xref:System.ServiceModel.Discovery.FindResponse> class is returned to the caller of <xref:System.ServiceModel.Discovery.DiscoveryClient.Find%2A> with the responses of the `Find` operation.</span></span> <span data-ttu-id="f5ee8-187">これは、<xref:System.ServiceModel.Discovery.FindCompletedEventArgs> にも存在します。</span><span class="sxs-lookup"><span data-stu-id="f5ee8-187">It is also present in <xref:System.ServiceModel.Discovery.FindCompletedEventArgs>.</span></span> <span data-ttu-id="f5ee8-188">これには、探索されたエンドポイントのコレクションである <xref:System.ServiceModel.Discovery.EndpointDiscoveryMetadata> のコレクションと、<xref:System.ServiceModel.Discovery.EndpointDiscoveryMetadata> および <xref:System.ServiceModel.Discovery.DiscoveryMessageSequence> のディクショナリが含まれます。</span><span class="sxs-lookup"><span data-stu-id="f5ee8-188">It contains a collection of <xref:System.ServiceModel.Discovery.EndpointDiscoveryMetadata>, which is the collection of discovered endpoints and a dictionary of <xref:System.ServiceModel.Discovery.EndpointDiscoveryMetadata> and <xref:System.ServiceModel.Discovery.DiscoveryMessageSequence>.</span></span>  
  
## <a name="resolvecriteria"></a><span data-ttu-id="f5ee8-189">ResolveCriteria</span><span class="sxs-lookup"><span data-stu-id="f5ee8-189">ResolveCriteria</span></span>  
 <span data-ttu-id="f5ee8-190"><xref:System.ServiceModel.Discovery.ResolveCriteria> クラスは、既知のサービスの解決時に使用される条件の指定に使用するバージョンに依存しないクラスです。</span><span class="sxs-lookup"><span data-stu-id="f5ee8-190">The <xref:System.ServiceModel.Discovery.ResolveCriteria> class is a version-independent class used to specify the criteria used when resolving an already known service.</span></span> <span data-ttu-id="f5ee8-191">これには、既知のサービスのエンドポイント アドレスが含まれます。</span><span class="sxs-lookup"><span data-stu-id="f5ee8-191">It contains the endpoint address of the known service.</span></span> <span data-ttu-id="f5ee8-192">開発者は、クライアントが応答を待機する時間を指定する <xref:System.ServiceModel.Discovery.ResolveCriteria.Duration%2A> を指定して、解決操作の終了条件を提供できます。</span><span class="sxs-lookup"><span data-stu-id="f5ee8-192">The developer can provide the termination criteria for the resolve operation by specifying the <xref:System.ServiceModel.Discovery.ResolveCriteria.Duration%2A>, which specifies how long the client waits for responses.</span></span>  
  
## <a name="resolveresponse"></a><span data-ttu-id="f5ee8-193">ResolveResponse</span><span class="sxs-lookup"><span data-stu-id="f5ee8-193">ResolveResponse</span></span>  
 <span data-ttu-id="f5ee8-194"><xref:System.ServiceModel.Discovery.ResolveResponse> は、<xref:System.ServiceModel.Discovery.DiscoveryClient.Resolve%2A> 操作の応答と共に、`Resolve` メソッドの呼び出し元に返されます。</span><span class="sxs-lookup"><span data-stu-id="f5ee8-194">The <xref:System.ServiceModel.Discovery.ResolveResponse> is returned to the caller of the <xref:System.ServiceModel.Discovery.DiscoveryClient.Resolve%2A> method with the response of the `Resolve` operation.</span></span> <span data-ttu-id="f5ee8-195">これは、<xref:System.ServiceModel.Discovery.ResolveCompletedEventArgs> にも存在します。</span><span class="sxs-lookup"><span data-stu-id="f5ee8-195">It is also present in <xref:System.ServiceModel.Discovery.ResolveCompletedEventArgs>.</span></span> <span data-ttu-id="f5ee8-196">これには、探索されたエンドポイントである <xref:System.ServiceModel.Discovery.EndpointDiscoveryMetadata> のインスタンスと、<xref:System.ServiceModel.Discovery.DiscoveryMessageSequence> のインスタンスが含まれます。</span><span class="sxs-lookup"><span data-stu-id="f5ee8-196">It contains an instance of <xref:System.ServiceModel.Discovery.EndpointDiscoveryMetadata>, which is the discovered endpoints and an instance of <xref:System.ServiceModel.Discovery.DiscoveryMessageSequence>.</span></span>  
  
## <a name="servicediscoverybehavior"></a><span data-ttu-id="f5ee8-197">ServiceDiscoveryBehavior</span><span class="sxs-lookup"><span data-stu-id="f5ee8-197">ServiceDiscoveryBehavior</span></span>  
 <span data-ttu-id="f5ee8-198"><xref:System.ServiceModel.Discovery.ServiceDiscoveryBehavior> クラスを使用すると、探索機能をサービスに追加できます。</span><span class="sxs-lookup"><span data-stu-id="f5ee8-198">The <xref:System.ServiceModel.Discovery.ServiceDiscoveryBehavior> class allows the developer to add the discovery feature to a service.</span></span> <span data-ttu-id="f5ee8-199">この動作は <xref:System.ServiceModel.ServiceHost> に追加します。</span><span class="sxs-lookup"><span data-stu-id="f5ee8-199">You add this behavior to the <xref:System.ServiceModel.ServiceHost>.</span></span> <span data-ttu-id="f5ee8-200"><xref:System.ServiceModel.Discovery.ServiceDiscoveryBehavior> クラスは、サービス ホストに追加されているアプリケーション エンドポイントに対して反復処理され、探索可能なエンドポイントに基づいて <xref:System.ServiceModel.Discovery.EndpointDiscoveryMetadata> のコレクションを作成します。</span><span class="sxs-lookup"><span data-stu-id="f5ee8-200">The <xref:System.ServiceModel.Discovery.ServiceDiscoveryBehavior> class iterates over the application endpoints added to the service host and creates a collection of <xref:System.ServiceModel.Discovery.EndpointDiscoveryMetadata> from the discoverable endpoints.</span></span> <span data-ttu-id="f5ee8-201">既定では、すべてのエンドポイントが探索可能です。</span><span class="sxs-lookup"><span data-stu-id="f5ee8-201">All endpoints are discoverable by default.</span></span> <span data-ttu-id="f5ee8-202">特定のエンドポイントが探索可能になるかどうかは、<xref:System.ServiceModel.Discovery.EndpointDiscoveryBehavior> をその特定のエンドポイントに追加することで制御できます。</span><span class="sxs-lookup"><span data-stu-id="f5ee8-202">The discoverability of a particular endpoint can be controlled by adding the <xref:System.ServiceModel.Discovery.EndpointDiscoveryBehavior> to that particular endpoint.</span></span> <span data-ttu-id="f5ee8-203">アナウンス エンドポイントが <xref:System.ServiceModel.Discovery.ServiceDiscoveryBehavior> に追加されると、サービス ホストが開かれるときまたは閉じられるときに、すべての探索可能なエンドポイントのアナウンスが、各アナウンス エンドポイントから送られます。</span><span class="sxs-lookup"><span data-stu-id="f5ee8-203">If announcement endpoints are added to <xref:System.ServiceModel.Discovery.ServiceDiscoveryBehavior> then the announcement of all discoverable endpoints is sent over each of the announcement endpoints when the service host is opened or closed.</span></span>  
  
## <a name="udpannouncementendpoint"></a><span data-ttu-id="f5ee8-204">UdpAnnouncementEndpoint</span><span class="sxs-lookup"><span data-stu-id="f5ee8-204">UdpAnnouncementEndpoint</span></span>  
 <span data-ttu-id="f5ee8-205"><xref:System.ServiceModel.Discovery.UdpAnnouncementEndpoint> クラスは、UDP マルチキャスト バインディングを使用するアナウンス用に事前に構成しておく標準のアナウンス エンドポイントです。</span><span class="sxs-lookup"><span data-stu-id="f5ee8-205">The <xref:System.ServiceModel.Discovery.UdpAnnouncementEndpoint> class is a standard announcement endpoint that is pre-configured for announcement over a UDP multicast binding.</span></span> <span data-ttu-id="f5ee8-206">既定では、<xref:System.ServiceModel.Discovery.UdpAnnouncementEndpoint> が WSApril2005 WS_Discovery バージョンを使用するように設定されています。</span><span class="sxs-lookup"><span data-stu-id="f5ee8-206">By default, <xref:System.ServiceModel.Discovery.UdpAnnouncementEndpoint> is set to use the WSApril2005 WS_Discovery version.</span></span>  
  
## <a name="udpdiscoveryendpoint"></a><span data-ttu-id="f5ee8-207">UdpDiscoveryEndpoint</span><span class="sxs-lookup"><span data-stu-id="f5ee8-207">UdpDiscoveryEndpoint</span></span>  
 <span data-ttu-id="f5ee8-208"><xref:System.ServiceModel.Discovery.UdpDiscoveryEndpoint> クラスは、UDP マルチキャスト バインディングを使用する探索のために事前に構成された標準の探索エンドポイントです。</span><span class="sxs-lookup"><span data-stu-id="f5ee8-208">The <xref:System.ServiceModel.Discovery.UdpDiscoveryEndpoint> class is a standard discovery endpoint that is pre-configured for discovery over a UDP multicast binding.</span></span> <span data-ttu-id="f5ee8-209">既定では、<xref:System.ServiceModel.Discovery.DiscoveryEndpoint> が、WSDiscovery11 WS-Discovery バージョンと <xref:System.ServiceModel.Discovery.ServiceDiscoveryMode.Adhoc?displayProperty=nameWithType> モードを使用するように設定されています。</span><span class="sxs-lookup"><span data-stu-id="f5ee8-209">By default, <xref:System.ServiceModel.Discovery.DiscoveryEndpoint> is set to use the WSDiscovery11 WS-Discovery version and <xref:System.ServiceModel.Discovery.ServiceDiscoveryMode.Adhoc?displayProperty=nameWithType> mode.</span></span>
